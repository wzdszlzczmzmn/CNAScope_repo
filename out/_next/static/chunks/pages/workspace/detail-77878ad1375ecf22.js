(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{7149:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/detail",function(){return n(1691)}])},1226:function(e,t,n){"use strict";n.d(t,{$G:function(){return o},$N:function(){return f},BQ:function(){return m},DM:function(){return s},Dy:function(){return j},ED:function(){return p},EY:function(){return u},Ed:function(){return x},JO:function(){return h},UF:function(){return c},US:function(){return a},d1:function(){return g},gR:function(){return r},jo:function(){return d},oi:function(){return Z},te:function(){return l}});var i=n(5955);let r=()=>"".concat(i.l,"/submit_basic_annotation_task/"),s=()=>"".concat(i.l,"/submit_recurrent_cna_task/"),a=()=>"".concat(i.l,"/query_task/"),o=e=>"".concat(i.l,"/run_demo/?name=").concat(e),d=e=>"".concat(i.l,"/query_task/?taskUUID=").concat(e),c=e=>"".concat(i.l,"/CNA_matrix/?uuid=").concat(e),l=e=>"".concat(i.l,"/CNA_meta/?uuid=").concat(e),u=e=>"".concat(i.l,"/CNA_tree/?uuid=").concat(e),x=e=>"".concat(i.l,"/CNA_genes/?uuid=").concat(e),p=e=>"".concat(i.l,"/CNA_newick/?uuid=").concat(e),h=e=>"".concat(i.l,"/CNA_gene_matrix/?uuid=").concat(e),j=e=>"".concat(i.l,"/CNA_terms/?uuid=").concat(e),g=e=>"".concat(i.l,"/CNA_term_matrix/?uuid=").concat(e),Z=e=>"".concat(i.l,"/ploidy_distribution/?uuid=").concat(e),m=e=>"".concat(i.l,"/focal_CNA_info/?uuid=").concat(e),f=e=>"".concat(i.l,"/download_task_data/?uuid=").concat(e)},1691:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return et}});var i=n(5893),r=n(1163),s=n(6976),a=n(8106),o=n(1226);let d=e=>{let{data:t,error:n,isLoading:i,mutate:r}=(0,s.ZP)((0,o.jo)(e),a._);return{task:t,isTaskLoading:i,isTaskError:n,mutate:r}};var c=n(9967),l=n(1080),u=n(9008),x=n.n(u),p=n(9073),h=n(3368),j=n(7423),g=n(7294),Z=n(8514),m=n(1218),f=n(9897);let k=e=>{let{data:t,error:n,isLoading:i,mutate:r}=(0,s.ZP)((0,o.UF)(e),a._);return{matrix:t,isMatrixLoading:i,isMatrixError:n,mutate:r}},v=e=>{let{data:t,error:n,isLoading:i,mutate:r}=(0,s.ZP)((0,o.te)(e),a._);return{meta:t,isMetaLoading:i,isMetaError:n,mutate:r}},y=e=>{let{data:t,error:n,isLoading:i,mutate:r}=(0,s.ZP)((0,o.EY)(e),a._);return{tree:t,isTreeLoading:i,isTreeError:n,mutate:r}};var w=n(9141);let _=e=>{let{task:t,vizRef:n}=e,{matrix:r,isMatrixLoading:s,isMatrixError:a}=k(t.data.uuid),{meta:o,isMetaLoading:d,isMetaError:u}=v(t.data.uuid),{tree:x,isTreeLoading:p,isTreeError:h}=y(t.data.uuid);if(s||d||p)return(0,i.jsx)(c.Z,{height:"920px"});if(a||u||h)return(0,i.jsx)(l.Z,{height:"920px"});let j="int"===t.data.value_type?2:0;return(0,i.jsx)(w.Z,{matrix:r,meta:o,tree:x,baselineCNA:j,reference:t.ref,vizRef:n})};var C=e=>{let{task:t}=e,n=(0,g.useRef)(null);return(0,i.jsxs)(p.Z,{spacing:4,children:[(0,i.jsxs)(p.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,i.jsx)(h.Z,{component:"h6",sx:{fontSize:"36px"},children:"Bin-Level CNA Heatmap"}),(0,i.jsx)(p.Z,{direction:"row",spacing:2,children:(0,i.jsx)(Z.ZP,{type:"primary",onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,i.jsx)(m.Z,{}),children:"Download SVG Chart"})})]}),(0,i.jsx)(f.Z,{children:(0,i.jsx)(_,{task:t,vizRef:n})})]})};n(9795),n(6011);let S=e=>{let{data:t,error:n,isLoading:i,mutate:r}=(0,s.ZP)((0,o.ED)(e),a._);return{newick:t,isNewickLoading:i,isNewickError:n,mutate:r}},b=e=>{let{data:t,error:n,isLoading:i,mutate:r}=(0,s.ZP)((0,o.Ed)(e),a._);return{genes:t,isGenesLoading:i,isGenesError:n,mutate:r}};var z=n(1499),R=n(8244),T=n(753);let I=e=>{let{task:t,vizRef:n}=e,{meta:r,isMetaLoading:s,isMetaError:a}=v(t.data.uuid),{newick:d,isNewickLoading:u,isNewickError:x}=S(t.data.uuid),{genes:p,isGenesLoading:h,isGenesError:j}=b(t.data.uuid),g="int"===t.data.value_type?2:0;return s||u||h?(0,i.jsx)(c.Z,{height:"920px"}):a||x||j?(0,i.jsx)(l.Z,{height:"920px"}):(0,i.jsx)(T.Z,{entity:"Gene",meta:r,newick:d,genes:p,geneMatrixFetcher:e=>z.Z.post((0,o.JO)(),{uuid:t.data.uuid,genes:e}),baselineCNA:g,vizRef:n})};var P=e=>{let{task:t}=e,n=(0,g.useRef)(null);return(0,i.jsxs)(p.Z,{spacing:4,children:[(0,i.jsxs)(p.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,i.jsx)(h.Z,{component:"h6",sx:{fontSize:"36px"},children:"Gene-Level CNA Heatmap"}),(0,i.jsx)(p.Z,{direction:"row",spacing:2,children:(0,i.jsx)(Z.ZP,{type:"primary",onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,i.jsx)(m.Z,{}),children:"Download SVG Chart"})})]}),(0,i.jsx)(f.Z,{children:(0,i.jsx)(I,{task:t,vizRef:n})})]})};n(1804),n(4299);let N=e=>{let{data:t,error:n,isLoading:i,mutate:r}=(0,s.ZP)((0,o.Dy)(e),a._);return{terms:t,isTermsLoading:i,isTermsError:n,mutate:r}},D=e=>{let{task:t,vizRef:n}=e,{meta:r,isMetaLoading:s,isMetaError:a}=v(t.data.uuid),{newick:d,isNewickLoading:u,isNewickError:x}=S(t.data.uuid),{terms:p,isTermsLoading:h,isTermsError:j}=N(t.data.uuid),g="int"===t.data.value_type?2:0;return s||u||h?(0,i.jsx)(c.Z,{height:"920px"}):a||x||j?(0,i.jsx)(l.Z,{height:"920px"}):(0,i.jsx)(T.Z,{entity:"Term",meta:r,newick:d,genes:p,geneMatrixFetcher:e=>z.Z.post((0,o.d1)(),{uuid:t.data.uuid,terms:e}),baselineCNA:g,vizRef:n})};var B=e=>{let{task:t}=e,n=(0,g.useRef)(null);return(0,i.jsxs)(p.Z,{spacing:4,children:[(0,i.jsxs)(p.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,i.jsx)(h.Z,{component:"h6",sx:{fontSize:"36px"},children:"Term-Level CNA Heatmap"}),(0,i.jsx)(p.Z,{direction:"row",spacing:2,children:(0,i.jsx)(Z.ZP,{type:"primary",onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,i.jsx)(m.Z,{}),children:"Download SVG Chart"})})]}),(0,i.jsx)(f.Z,{children:(0,i.jsx)(D,{task:t,vizRef:n})})]})},A=n(1023);let E=e=>{let{task:t,vizRef:n}=e,{meta:r,isMetaLoading:s,isMetaError:a}=v(t.data.uuid),{newick:o,isNewickLoading:d,isNewickError:u}=S(t.data.uuid);return s||d?(0,i.jsx)(c.Z,{height:"920px"}):a||u?(0,i.jsx)(l.Z,{height:"920px"}):(0,i.jsx)(A.Z,{meta:r,newick:o,vizRef:n})};var U=e=>{let{task:t}=e,n=(0,g.useRef)(null);return(0,i.jsxs)(p.Z,{spacing:4,children:[(0,i.jsxs)(p.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,i.jsx)(h.Z,{component:"h6",sx:{fontSize:"36px"},children:"CNA Phylogenetic Tree"}),(0,i.jsx)(p.Z,{direction:"row",spacing:2,children:(0,i.jsx)(Z.ZP,{type:"primary",onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,i.jsx)(m.Z,{}),children:"Download SVG Chart"})})]}),(0,i.jsx)(f.Z,{children:(0,i.jsx)(E,{task:t,vizRef:n})})]})},F=n(3371);let G=e=>{let{task:t,vizRef:n}=e,{meta:r,isMetaLoading:s,isMetaError:a}=v(t.data.uuid);return s?(0,i.jsx)(c.Z,{height:"920px"}):a?(0,i.jsx)(l.Z,{height:"920px"}):(0,i.jsx)(F.Z,{meta:r,vizRef:n})};var L=e=>{let{task:t}=e,n=(0,g.useRef)(null);return(0,i.jsxs)(p.Z,{spacing:4,children:[(0,i.jsxs)(p.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,i.jsx)(h.Z,{component:"h6",sx:{fontSize:"36px"},children:"CNA Embedding Map"}),(0,i.jsx)(p.Z,{direction:"row",spacing:2,children:(0,i.jsx)(Z.ZP,{type:"primary",onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,i.jsx)(m.Z,{}),children:"Download SVG Chart"})})]}),(0,i.jsx)(f.Z,{children:(0,i.jsx)(G,{task:t,vizRef:n})})]})},V=n(8292);let M=e=>{let{task:t,vizRef:n}=e,{matrix:r,isMatrixLoading:s,isMatrixError:a}=k(t.data.uuid),{meta:o,isMetaLoading:d,isMetaError:u}=v(t.data.uuid);if(s||d)return(0,i.jsx)(c.Z,{height:"920px"});if(a||u)return(0,i.jsx)(l.Z,{height:"920px"});let x="int"===t.data.value_type?2:0;return(0,i.jsx)(V.Z,{matrix:r,meta:o,baselineCNA:x,reference:t.data.ref,vizRef:n})};var O=e=>{let{task:t}=e,n=(0,g.useRef)(null);return(0,i.jsxs)(p.Z,{spacing:4,children:[(0,i.jsxs)(p.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,i.jsx)(h.Z,{component:"h6",sx:{fontSize:"36px"},children:"CNA Ploidy Stairstep"}),(0,i.jsx)(p.Z,{direction:"row",spacing:2,children:(0,i.jsx)(Z.ZP,{type:"primary",onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,i.jsx)(m.Z,{}),children:"Download SVG Chart"})})]}),(0,i.jsx)(f.Z,{children:(0,i.jsx)(M,{task:t,vizRef:n})})]})};let Q=e=>{let{data:t,error:n,isLoading:i,mutate:r}=(0,s.ZP)((0,o.oi)(e),a._);return{distributions:t,isDistributionsLoading:i,isDistributionsError:n,mutate:r}};var W=n(4665);let $=e=>{let{task:t,vizRef:n}=e,{distributions:r,isDistributionsLoading:s,isDistributionsError:a}=Q(t.data.uuid);return s?(0,i.jsx)(c.Z,{height:"920px"}):a?(0,i.jsx)(l.Z,{height:"920px"}):(0,i.jsx)(W.Z,{distributions:r,vizRef:n})};var q=e=>{let{task:t}=e,n=(0,g.useRef)(null);return(0,i.jsxs)(p.Z,{spacing:4,children:[(0,i.jsxs)(p.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,i.jsx)(h.Z,{component:"h6",sx:{fontSize:"36px"},children:"CNA Ploidy Distribution"}),(0,i.jsx)(p.Z,{direction:"row",spacing:2,children:(0,i.jsx)(Z.ZP,{type:"primary",onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,i.jsx)(m.Z,{}),children:"Download SVG Chart"})})]}),(0,i.jsx)(f.Z,{children:(0,i.jsx)($,{task:t,vizRef:n})})]})},H=e=>{let{task:t}=e;return(0,i.jsxs)(p.Z,{spacing:4,sx:{pt:"12px",px:"32px"},children:[(0,i.jsxs)(p.Z,{spacing:4,direction:"row",alignItem:"center",sx:{borderBottom:"2px solid #e0e0e0",mb:"36px",paddingBottom:"12px"},children:[(0,i.jsx)(h.Z,{component:"h6",sx:{fontSize:"36px",m:0},children:"Task Information"}),(0,i.jsx)(Z.ZP,{type:"primary",icon:(0,i.jsx)(m.Z,{}),onClick:()=>(0,R.ae)((0,o.$N)(t.data.uuid)),size:"large",children:"Download Result"})]}),(0,i.jsx)(j.InformationDescriptions,{taskInformation:t}),(0,i.jsx)(C,{task:t}),(0,i.jsx)(P,{task:t}),(0,i.jsx)(B,{task:t}),(0,i.jsx)(U,{task:t}),(0,i.jsx)(L,{task:t}),(0,i.jsx)(O,{task:t}),(0,i.jsx)(q,{task:t})]})};n(1091);var J=n(6577);let X=e=>{let{data:t,error:n,isLoading:i,mutate:r}=(0,s.ZP)((0,o.BQ)(e),a._);return{focalInfo:t||[],isFocalInfoLoading:i,isFocalInfoError:n,mutate:r}},Y=e=>{let{task:t,vizRef:n}=e,{focalInfo:r,isFocalInfoLoading:s,isFocalInfoError:a}=X(t.data.uuid);return s?(0,i.jsx)(c.Z,{height:"920px"}):a?(0,i.jsx)(l.Z,{height:"920px"}):(0,i.jsx)(J.Z,{focalInfo:r,reference:t.data.ref,vizRef:n})};var K=e=>{let{task:t}=e,n=(0,g.useRef)(null);return(0,i.jsxs)(p.Z,{spacing:4,children:[(0,i.jsxs)(p.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,i.jsx)(h.Z,{component:"h6",sx:{fontSize:"36px"},children:"Focal CNA & Gene"}),(0,i.jsx)(p.Z,{direction:"row",spacing:2,children:(0,i.jsx)(Z.ZP,{type:"primary",onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,i.jsx)(m.Z,{}),children:"Download SVG Chart"})})]}),(0,i.jsx)(f.Z,{children:(0,i.jsx)(Y,{task:t,vizRef:n})})]})},ee=e=>{let{task:t}=e;return(0,i.jsxs)(p.Z,{spacing:4,sx:{pt:"12px",px:"32px"},children:[(0,i.jsxs)(p.Z,{spacing:4,direction:"row",alignItem:"center",sx:{borderBottom:"2px solid #e0e0e0",mb:"36px",paddingBottom:"12px"},children:[(0,i.jsx)(h.Z,{component:"h6",sx:{fontSize:"36px",m:0},children:"Task Information"}),(0,i.jsx)(Z.ZP,{type:"primary",icon:(0,i.jsx)(m.Z,{}),onClick:()=>(0,R.ae)((0,o.$N)(t.data.uuid)),size:"large",children:"Download Result"})]}),(0,i.jsx)(j.InformationDescriptions,{taskInformation:t}),(0,i.jsx)(K,{task:t})]})},et=e=>{let{}=e,t=(0,r.useRouter)(),{taskId:n}=t.query,{task:s,isTaskLoading:a,isTaskError:o}=d(n);return!t.isReady||a?(0,i.jsx)(c.Z,{containerSx:{height:"80vh",marginTop:"40px"}}):o?(0,i.jsx)(l.Z,{containerSx:{height:"80vh",marginTop:"40px"}}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x(),{children:(0,i.jsx)("title",{children:"Workflow Result | CNAScope"})}),"BasicAnnotationTask"===s.task_type?(0,i.jsx)(H,{task:s}):(0,i.jsx)(ee,{task:s})]})}},7423:function(e,t,n){"use strict";n.r(t),n.d(t,{InformationDescriptions:function(){return w}});var i=n(5893),r=n(7294),s=n(1163),a=n(8236),o=n(8514),d=n(8348),c=n(3484),l=n(2395),u=n(9073),x=n(3368),p=n(6793),h=n(1499),j=n(1226),g=n(9980);let Z=e=>{let{taskInformation:t,handleSearch:n}=e;return(0,i.jsx)(x.Z,{sx:{border:"1px solid #1677FF",borderRadius:"10px",padding:"32px 32px"},children:null===t?(0,i.jsx)(m,{}):(0,i.jsx)(f,{taskInformation:t,handleSearch:n})})},m=()=>(0,i.jsx)(u.Z,{sx:{alignItems:"center",height:"450px",justifyContent:"center"},children:(0,i.jsx)(d.Z,{})}),f=e=>{let{taskInformation:t,handleSearch:n}=e,r=(0,s.useRouter)(),a=()=>{r.push("/workspace/detail?taskId=".concat(t.data.uuid))};return(0,i.jsxs)(u.Z,{spacing:2,children:[(0,i.jsx)(x.Z,{component:"h6",sx:{fontSize:"28px",fontWeight:"500",paddingBottom:"12px"},children:"Task Information:"}),(0,i.jsx)(x.Z,{sx:{padding:"0px 32px"},children:(0,i.jsx)(w,{taskInformation:t})}),(0,i.jsxs)(u.Z,{direction:"row",spacing:4,sx:{justifyContent:"space-around",paddingTop:"16px",paddingLeft:"32px",paddingRight:"32px"},children:[(0,i.jsx)(o.ZP,{size:"large",style:{width:"400px"},onClick:()=>n(t.uuid),children:"Refresh Task Status"}),(0,i.jsx)(o.ZP,{type:"primary",size:"large",style:{width:"400px"},disabled:"S"!==t.data.status,onClick:()=>a(),children:"View Task Detail"})]})]})},k={R:"Running",P:"Pending",S:"Success",F:"Failed"},v={Running:(0,i.jsx)(c.Z,{status:"processing",text:"Running"}),Success:(0,i.jsx)(c.Z,{status:"success",text:"Success"}),Pending:(0,i.jsx)(c.Z,{status:"default",text:"Pending"}),Failed:(0,i.jsx)(c.Z,{status:"error",text:"Failed"})},y=e=>{let t=[];return t.push({key:"TaskUUID",label:"Task UUID",children:e.data.uuid,span:2}),t.push({key:"Status",label:"Status",children:v[k[e.data.status]],span:2}),t.push({key:"TaskType",label:"Task Type",children:e.task_type,span:2}),t.push({key:"CreateTime",label:"Create Time",children:e.data.create_time,span:1}),t.push({key:"FinishTime",label:"Finish Time",children:e.data.finish_time,span:1}),t.push({key:"obsType",label:"Observation Type",children:e.data.obs_type,span:1}),t.push({key:"reference",label:"Reference",children:e.data.ref,span:1}),"BasicAnnotationTask"===e.task_type&&(t.push({key:"k",label:"K",children:e.data.k,span:1}),t.push({key:"valueType",label:"CNA Value Type",children:e.data.value_type,span:1}),t.push({key:"windowType",label:"Window Type",children:e.data.window_type,span:1})),t},w=e=>{let{taskInformation:t}=e,n=y(t);return(0,i.jsx)(l.Z,{bordered:!0,items:n,column:2})};t.default=e=>{let{tasks:t,userId:n}=e,s=(0,g.z)(),[d,c]=(0,r.useState)(""),[l,m]=(0,r.useState)(null),f=async()=>{try{let e=await h.Z.get((0,j.US)(),{params:{taskUUID:d}});m(e.data)}catch(e){m(null),e?"ERR_BAD_REQUEST"===e.code?s.error("Please Enter a Correct UUID!"):s.error(e.message):s.error("Please check the UUID you submit.")}};return(0,i.jsxs)(u.Z,{spacing:1,sx:{alignItems:"center"},children:[(0,i.jsx)(x.Z,{component:"h6",sx:{fontSize:"40px",paddingBottom:"48px",paddingTop:"32px"},children:"Task Query"}),(0,i.jsxs)(u.Z,{direction:"row",spacing:3,sx:{alignItems:"center"},children:[(0,i.jsx)(x.Z,{component:"span",sx:{fontSize:"24px",fontWeight:"500"},children:"UUID:"}),(0,i.jsx)(a.Z,{placeholder:"Please Enter Task UUID...",allowClear:!0,size:"large",style:{width:"700px",borderRadius:"18px"},value:d,onChange:e=>{c(e.target.value)}}),(0,i.jsx)(o.ZP,{type:"primary",size:"large",icon:(0,i.jsx)(p.Z,{}),style:{borderRadius:"18px"},onClick:f,children:"Search"})]}),(0,i.jsx)(x.Z,{sx:{paddingTop:"60px",width:"90%"},children:(0,i.jsx)(Z,{taskInformation:l,handleSearch:f})})]})}}},function(e){e.O(0,[662,362,107,314,441,816,236,158,43,4,895,985,888,774,179],function(){return e(e.s=7149)}),_N_E=e.O()}]);