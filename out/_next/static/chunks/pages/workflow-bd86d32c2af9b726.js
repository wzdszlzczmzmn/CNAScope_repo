(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{1992:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workflow",function(){return l(7322)}])},1226:function(e,t,l){"use strict";l.d(t,{$G:function(){return r},$N:function(){return y},BQ:function(){return j},DM:function(){return i},Dy:function(){return h},ED:function(){return m},EY:function(){return d},Ed:function(){return p},JO:function(){return x},UF:function(){return o},US:function(){return s},d1:function(){return b},gR:function(){return a},jo:function(){return c},oi:function(){return f},te:function(){return u}});var n=l(5955);let a=()=>"".concat(n.l,"/submit_basic_annotation_task/"),i=()=>"".concat(n.l,"/submit_recurrent_cna_task/"),s=()=>"".concat(n.l,"/query_task/"),r=e=>"".concat(n.l,"/run_demo/?name=").concat(e),c=e=>"".concat(n.l,"/query_task/?taskUUID=").concat(e),o=e=>"".concat(n.l,"/CNA_matrix/?uuid=").concat(e),u=e=>"".concat(n.l,"/CNA_meta/?uuid=").concat(e),d=e=>"".concat(n.l,"/CNA_tree/?uuid=").concat(e),p=e=>"".concat(n.l,"/CNA_genes/?uuid=").concat(e),m=e=>"".concat(n.l,"/CNA_newick/?uuid=").concat(e),x=e=>"".concat(n.l,"/CNA_gene_matrix/?uuid=").concat(e),h=e=>"".concat(n.l,"/CNA_terms/?uuid=").concat(e),b=e=>"".concat(n.l,"/CNA_term_matrix/?uuid=").concat(e),f=e=>"".concat(n.l,"/ploidy_distribution/?uuid=").concat(e),j=e=>"".concat(n.l,"/focal_CNA_info/?uuid=").concat(e),y=e=>"".concat(n.l,"/download_task_data/?uuid=").concat(e)},1499:function(e,t,l){"use strict";var n=l(7066),a=l(5955);let i=n.Z.create({baseURL:a.Sg,timeout:6e4,headers:{"Content-Type":"application/json"}});t.Z=i},5955:function(e,t,l){"use strict";l.d(t,{Sg:function(){return n},Vl:function(){return a},l:function(){return i}});let n="https://cna.fengslab.com/api",a=n+"/database",i=n+"/analysis"},7322:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return er}});var n=l(5893),a=l(7294),i=l(3368),s=l(2904),r=l(8025),c=l(1163),o=l(9980),u=l(530),d=l(2492),p=l(8792),m=l(20),x=l(3721),h=l(7436),b=l(7489),f=l(2635),j=l(8514),y=l(9073),g=l(2130),v=l(7672),k=l(7464),C=l(3293),Z=l(7228),S=l(2218),w=e=>{let{runDemoItems:t,viewResultItems:l,onHelp:a}=e;return(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(g.Z,{menu:{items:t},placement:"bottom",children:(0,n.jsx)(j.ZP,{type:"primary",icon:(0,n.jsx)(k.Z,{}),children:"Run Demo"})}),(0,n.jsx)(g.Z,{menu:{items:l},placement:"bottom",children:(0,n.jsx)(j.ZP,{danger:!0,icon:(0,n.jsx)(C.Z,{}),children:"View Demo Result"})}),(0,n.jsx)(v.Z,{type:"vertical",verticalAlign:"middle",style:{height:24}}),(0,n.jsx)(j.ZP,{type:"primary",icon:(0,n.jsx)(Z.Z,{}),onClick:a,children:"Submission Help"}),(0,n.jsx)(j.ZP,{danger:!0,icon:(0,n.jsx)(S.Z,{}),href:"/demo/cna.csv",target:"_blank",children:"View Demo File"})]})},_=l(7307);let A=()=>(0,n.jsxs)(i.Z,{component:"span",sx:{fontSize:"16px"},children:["It takes a few minutes to ",(0,n.jsx)(i.Z,{component:"span",sx:{color:"red"},children:"RUN DEMO"}),". Click ",(0,n.jsx)(i.Z,{component:"span",sx:{color:"red"},children:"VIEW DEMO RESULT"})," to see the precomputed demo results immediately.",(0,n.jsx)("br",{}),"If you encounter any submission issues, please contact us at ",(0,n.jsx)("a",{href:"mailto:fxk@nwpu.edu.cn",children:"fxk@nwpu.edu.cn"})," or ",(0,n.jsx)("a",{href:"mailto:lingxi.chen@cityu.edu.hk",children:"lingxi.chen@cityu.edu.hk"})," for immediate assistance."]}),I=e=>{let{info:t=(0,n.jsx)(A,{})}=e;return(0,n.jsx)(_.Z,{message:(0,n.jsx)("strong",{children:"Notice:"}),description:t,type:"info",showIcon:!0})};var T=l(3859),N=l(1499),D=l(1226),U=l(9137),R=l(5009),P=l(5243),O=l(1430),B=l(4484),F=e=>{let{isModalOpen:t,setIsModelOpen:l,submissionStatus:a,taskUUID:s}=e,r=(0,o.z)(),c=()=>{l(!1)};return(0,n.jsx)(U.Z,{title:null,open:t,footer:null,centered:!0,closable:!1,children:(0,n.jsx)(R.ZP,{status:a?"success":"error",title:a?"Successfully Submit A Task!":"Some Error Occur During Submission!",subTitle:a?"Please keep the below UUID for task querying!":"",icon:a?(0,n.jsx)(P.Z,{style:{fontSize:"72px",color:"#52c41a"}}):(0,n.jsx)(O.Z,{style:{fontSize:"72px",color:"#ff4d4f"}}),extra:a?(0,n.jsxs)(y.Z,{sx:{alignItems:"center",marginBottom:"-40px"},spacing:3,children:[(0,n.jsxs)(y.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center",width:"350px",backgroundColor:"#0053B30D",borderRadius:"12px",padding:"16px 16px",fontSize:"14px"},children:[(0,n.jsx)(i.Z,{component:"span",children:s}),(0,n.jsx)(i.Z,{component:"span",children:(0,n.jsx)(B.Z,{style:{color:"rgb(148 163 184)"},onClick:()=>{navigator.clipboard.writeText(s).then(()=>{r.success("Task UUID Copy Successfully!")}).catch(e=>{r.error("Failed To Copy Task UUID.")})}})})]}),(0,n.jsxs)(y.Z,{direction:"row",spacing:3,children:[(0,n.jsx)(j.ZP,{onClick:()=>{let e=new Blob([s],{type:"text/plain"}),t=URL.createObjectURL(e),l=document.createElement("a");l.href=t,l.download="Task_UUID.txt",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(t)},size:"large",style:{width:"180px"},children:"Download as TXT"}),(0,n.jsx)(j.ZP,{type:"primary",size:"large",style:{width:"180px"},onClick:c,children:"Confirm Submission"})]})]}):(0,n.jsx)(i.Z,{sx:{marginBottom:"-40px"},children:(0,n.jsx)(j.ZP,{onClick:c,size:"large",danger:!0,style:{width:"300px"},children:"Confirm"})})})})};let{Title:L}=u.default,{Option:z}=d.default,{Dragger:E}=p.default,q=[{value:"hg38",label:"hg38"},{value:"hg19",label:"hg19"}],M=[{value:"sample",label:"Bulk Sequencing"},{value:"cell",label:"Single-cell Sequencing"},{value:"spot",label:"Spatial Transcriptomics"}],V=[{value:"bin",label:"Bin"},{value:"gene",label:"Gene"}],G=[{value:"int",label:"Integer"},{value:"log",label:"Log"}],H=e=>{var t;return Array.isArray(e)?e:null==e?void 0:null===(t=e.fileList)||void 0===t?void 0:t.slice(-1)},W=e=>[{key:"1",label:(0,n.jsx)(i.Z,{onClick:()=>e("TCGA-ACC"),children:"TCGA-ACC"})},{key:"2",label:(0,n.jsx)(i.Z,{onClick:()=>e("WCDT-MCRPC"),children:"WCDT-MCRPC"})},{key:"3",label:(0,n.jsx)(i.Z,{onClick:()=>e("BRCA-T10"),children:"BRCA-T10"})}],$=e=>[{key:"1",label:(0,n.jsx)(i.Z,{onClick:()=>e.push("/workspace/detail?taskId=5935135b-e52c-43aa-a949-0b526c000013"),children:"TCGA-ACC"})},{key:"2",label:(0,n.jsx)(i.Z,{onClick:()=>e.push("/workspace/detail?taskId=d7b6653e-b819-44db-a9c7-78719b0587d6"),children:"WCDT-MCRPC"})},{key:"3",label:(0,n.jsx)(i.Z,{onClick:()=>e.push("/workspace/detail?taskId=69420ed8-532f-4701-b081-1ea77a12fca5"),children:"BRCA-T10"})}];var X=e=>{let{}=e,[t,l]=(0,a.useState)(!1),[i,s]=(0,a.useState)(!1),[r,u]=(0,a.useState)(""),[p,g]=(0,a.useState)(!0),v=(0,o.z)(),k=(0,c.useRouter)(),C=W(async e=>{try{l(!0);let t=await N.Z.get((0,D.$G)(e));u(t.data.data.uuid),g(!0),s(!0),v.success("Submit Success!")}catch(e){g(!1),s(!0),v.error("Submit Fail!")}finally{l(!1)}}),Z=$(k),S=async e=>{try{var t,n,a;l(!0);let i=new FormData;i.append("k",null!==(a=e.k)&&void 0!==a?a:10),i.append("ref",e.ref),i.append("obs_type",e.obs_type),i.append("window_type",e.window_type),i.append("value_type",e.value_type);let r=null===(n=e.input_file)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.originFileObj;r&&i.append("input_file",r,r.name);let c=await N.Z.post((0,D.gR)(),i,{headers:{"Content-Type":"multipart/form-data"},timeout:6e5});u(c.data.data.uuid),g(!0),s(!0),v.success("Submit Success!")}catch(e){g(!1),s(!0),v.error("Submit Fail!")}finally{l(!1)}};return(0,n.jsxs)(m.Z,{spinning:t,tip:"Submitting, please wait...",size:"large",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 180px)"},children:[(0,n.jsxs)(y.Z,{sx:{px:"12px"},spacing:2,children:[(0,n.jsx)(L,{level:2,style:{marginTop:"12px",paddingBottom:"12px",borderBottom:"1px solid rgb(211, 211, 211)"},children:"Basic CNA Annotation"}),(0,n.jsx)(w,{runDemoItems:C,viewResultItems:Z,onHelp:()=>{k.push("/tutorial")}}),(0,n.jsx)(I,{})]}),(0,n.jsx)(x.Z,{style:{marginTop:24,borderRadius:8,border:"1px solid #eee",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:(0,n.jsxs)(h.Z,{layout:"vertical",onFinish:S,initialValues:{k:10,ref:"hg38",obs_type:"sample",window_type:"bin",value_type:"int"},children:[(0,n.jsx)(h.Z.Item,{name:"k",label:"k",tooltip:"Parameter for clustering/nearest neighbors, default is 10",rules:[{type:"number",min:1,message:"k must be â‰¥ 1"}],children:(0,n.jsx)(b.Z,{style:{width:"100%"},placeholder:"10"})}),(0,n.jsx)(h.Z.Item,{name:"ref",label:"Reference",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select reference genome",children:q.map(e=>(0,n.jsx)(z,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"obs_type",label:"Obs Type",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select observation type",children:M.map(e=>(0,n.jsx)(z,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"window_type",label:"Window Type",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select window type",children:V.map(e=>(0,n.jsx)(z,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"value_type",label:"Value Type",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select value type",children:G.map(e=>(0,n.jsx)(z,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"input_file",label:"Input File",valuePropName:"fileList",getValueFromEvent:H,tooltip:"Upload CNA matrix file",rules:[{required:!0}],children:(0,n.jsxs)(E,{name:"file",multiple:!1,beforeUpload:()=>!1,accept:".csv",children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(T.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Drag file here, or click to select"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:"Supports CSV."})]})}),(0,n.jsx)(h.Z.Item,{children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(j.ZP,{type:"primary",htmlType:"submit",loading:t,children:"Submit"}),(0,n.jsx)(j.ZP,{htmlType:"reset",children:"Reset"})]})})]})}),(0,n.jsx)(F,{isModalOpen:i,setIsModelOpen:s,taskUUID:r,submissionStatus:p})]})};let{Title:J}=u.default,{Option:K}=d.default,{Dragger:Q}=p.default,Y=[{value:"hg38",label:"hg38"},{value:"hg19",label:"hg19"}],ee=[{value:"sample",label:"Bulk Sequencing"},{value:"cell",label:"Single-cell Sequencing"},{value:"spot",label:"Spatial Transcriptomics"}],et=e=>Array.isArray(e)?e:null==e?void 0:e.fileList,el=e=>[{key:"1",label:(0,n.jsx)(i.Z,{onClick:()=>e("LUAD"),children:"LUAD"})},{key:"2",label:(0,n.jsx)(i.Z,{onClick:()=>e("LUSC"),children:"LUSC"})},{key:"3",label:(0,n.jsx)(i.Z,{onClick:()=>e("COAD"),children:"COAD"})}],en=e=>[{key:"1",label:(0,n.jsx)(i.Z,{onClick:()=>e.push("/workspace/detail?taskId=c0cdebe2-b827-42a3-9ba9-290f6141a3e6"),children:"LUAD"})},{key:"2",label:(0,n.jsx)(i.Z,{onClick:()=>e.push("/workspace/detail?taskId=1aa0a87b-c907-4deb-9b17-2f8618dd4013"),children:"LUSC"})},{key:"3",label:(0,n.jsx)(i.Z,{onClick:()=>e.push("/workspace/detail?taskId=ed8a3bc2-2a73-42be-8077-8099012c4d87"),children:"COAD"})}];var ea=e=>{let{}=e,[t,l]=(0,a.useState)(!1),[i,s]=(0,a.useState)(!1),[r,u]=(0,a.useState)(""),[p,b]=(0,a.useState)(!0),g=(0,o.z)(),v=(0,c.useRouter)(),k=el(async e=>{try{l(!0);let t=await N.Z.get((0,D.$G)(e));u(t.data.data.uuid),b(!0),s(!0),g.success("Submit Success!")}catch(e){b(!1),s(!0),g.error("Submit Fail!")}finally{l(!1)}}),C=en(v),Z=async e=>{try{var t,n;l(!0);let a=new FormData;a.append("ref",e.ref),a.append("obs_type",e.obs_type);let i=null===(n=e.input_file)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.originFileObj;for(let[e,t]of(i&&a.append("input_file",i,i.name),a.entries()))console.log(e,t);let r=await N.Z.post((0,D.DM)(),a,{headers:{"Content-Type":"multipart/form-data"},timeout:6e5});u(r.data.data.uuid),b(!0),s(!0),g.success("Submit Success!")}catch(e){b(!1),s(!0),g.error("Submit Fail!")}finally{l(!1)}};return(0,n.jsxs)(m.Z,{spinning:t,tip:"Submitting, please wait...",size:"large",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 180px)"},children:[(0,n.jsxs)(y.Z,{sx:{px:"12px"},spacing:2,children:[(0,n.jsx)(J,{level:2,style:{marginTop:"12px",paddingBottom:"12px",borderBottom:"1px solid rgb(211, 211, 211)"},children:"Recurrent CNA Annotation"}),(0,n.jsx)(w,{runDemoItems:k,viewResultItems:C,onHelp:()=>{v.push("/tutorial")}}),(0,n.jsx)(I,{}),(0,n.jsx)(x.Z,{style:{marginTop:24,borderRadius:8,border:"1px solid #eee",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:(0,n.jsxs)(h.Z,{layout:"vertical",onFinish:Z,initialValues:{ref:"hg38",obs_type:"sample"},children:[(0,n.jsx)(h.Z.Item,{name:"ref",label:"Reference",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select reference genome",children:Y.map(e=>(0,n.jsx)(K,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"obs_type",label:"Obs Type",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select observation type",children:ee.map(e=>(0,n.jsx)(K,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"input_file",label:"Input File",valuePropName:"fileList",getValueFromEvent:et,tooltip:"Upload a single CNA matrix file or a zip file containing multiple CNV matrix files",rules:[{required:!0}],children:(0,n.jsxs)(Q,{name:"file",multiple:!1,beforeUpload:()=>!1,accept:".csv,.zip",children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(T.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Drag file here, or click to select"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:"Supports .csv and .zip."})]})}),(0,n.jsx)(h.Z.Item,{children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(j.ZP,{type:"primary",htmlType:"submit",loading:t,children:"Submit"}),(0,n.jsx)(j.ZP,{htmlType:"reset",children:"Reset"})]})})]})})]}),(0,n.jsx)(F,{isModalOpen:i,setIsModelOpen:s,taskUUID:r,submissionStatus:p})]})};let ei={components:{Menu:{itemHeight:48,itemPaddingInline:20,fontSize:16}}},es=[{key:"basicCNAAnnotation",label:"Basic CNA Annotation"},{key:"recurrentCNAAnnotation",label:"Recurrence CNA Annotation"}];var er=e=>{let{}=e,[t,l]=(0,a.useState)("basicCNAAnnotation");return(0,n.jsxs)(i.Z,{sx:{display:"flex",minHeight:"calc(100vh - 148px)"},children:[(0,n.jsx)(i.Z,{sx:{pt:"12px",width:350,borderRight:"1px solid #e5e5e5"},children:(0,n.jsx)(s.ZP,{theme:ei,children:(0,n.jsx)(r.Z,{mode:"inline",selectedKeys:[t],onClick:e=>{let{key:t}=e;return l(t)},style:{borderRight:"none"},items:es})})}),(0,n.jsx)(i.Z,{flex:1,p:3,overflow:"auto",children:(()=>{switch(t){case"basicCNAAnnotation":return(0,n.jsx)(X,{});case"recurrentCNAAnnotation":return(0,n.jsx)(ea,{});default:return null}})()})]})}}},function(e){e.O(0,[920,944,70,816,441,530,721,43,995,888,774,179],function(){return e(e.s=1992)}),_N_E=e.O()}]);