(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{1992:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workflow",function(){return t(7322)}])},1226:function(e,l,t){"use strict";t.d(l,{DM:function(){return a},US:function(){return s},gR:function(){return i}});var n=t(5955);let i=()=>"".concat(n.l,"/submit_basic_annotation_task/"),a=()=>"".concat(n.l,"/submit_recurrent_cna_task/"),s=()=>"".concat(n.l,"/query_task/")},1499:function(e,l,t){"use strict";var n=t(7066),i=t(5955);let a=n.Z.create({baseURL:i.Sg,timeout:6e4,headers:{"Content-Type":"application/json"}});l.Z=a},5955:function(e,l,t){"use strict";t.d(l,{Sg:function(){return n},Vl:function(){return i},l:function(){return a}});let n="https://cna.fengslab.com/api",i=n+"/database",a=n+"/analysis"},7322:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return el}});var n=t(5893),i=t(7294),a=t(3368),s=t(2904),r=t(8025),o=t(1163),c=t(9980),u=t(530),d=t(2492),p=t(8792),x=t(4581),m=t(3721),h=t(7436),b=t(7489),j=t(2635),f=t(8514),g=t(9073),y=t(7672),v=t(7464),Z=t(3293),S=t(7228),w=e=>{let{onRunDemo:l,onViewResult:t,onHelp:i}=e;return(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(f.ZP,{type:"primary",icon:(0,n.jsx)(v.Z,{}),onClick:l,children:"Run Demo"}),(0,n.jsx)(f.ZP,{danger:!0,icon:(0,n.jsx)(Z.Z,{}),onClick:t,children:"View Demo Result"}),(0,n.jsx)(y.Z,{type:"vertical",verticalAlign:"middle",style:{height:24}}),(0,n.jsx)(f.ZP,{type:"primary",icon:(0,n.jsx)(S.Z,{}),onClick:i,children:"Submission Help"})]})},_=t(7307);let k=()=>(0,n.jsxs)(a.Z,{component:"span",sx:{fontSize:"16px"},children:["It takes a few minutes to ",(0,n.jsx)(a.Z,{component:"span",sx:{color:"red"},children:"RUN DEMO"}),". Click ",(0,n.jsx)(a.Z,{component:"span",sx:{color:"red"},children:"VIEW DEMO RESULT"})," to see the precomputed demo results immediately."]}),C=e=>{let{info:l=(0,n.jsx)(k,{})}=e;return(0,n.jsx)(_.Z,{message:l,type:"info",showIcon:!0})};var R=t(3859),I=t(1499),T=t(1226),A=t(9137),N=t(5009),D=t(5243),U=t(1430),P=t(4484),O=e=>{let{isModalOpen:l,setIsModelOpen:t,submissionStatus:i,taskUUID:s}=e,r=(0,c.z)(),o=()=>{t(!1)};return(0,n.jsx)(A.Z,{title:null,open:l,footer:null,centered:!0,closable:!1,children:(0,n.jsx)(N.ZP,{status:i?"success":"error",title:i?"Successfully Submit A Task!":"Some Error Occur During Submission!",subTitle:i?"Please keep the below UUID for task querying!":"",icon:i?(0,n.jsx)(D.Z,{style:{fontSize:"72px",color:"#52c41a"}}):(0,n.jsx)(U.Z,{style:{fontSize:"72px",color:"#ff4d4f"}}),extra:i?(0,n.jsxs)(g.Z,{sx:{alignItems:"center",marginBottom:"-40px"},spacing:3,children:[(0,n.jsxs)(g.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center",width:"350px",backgroundColor:"#0053B30D",borderRadius:"12px",padding:"16px 16px",fontSize:"14px"},children:[(0,n.jsx)(a.Z,{component:"span",children:s}),(0,n.jsx)(a.Z,{component:"span",children:(0,n.jsx)(P.Z,{style:{color:"rgb(148 163 184)"},onClick:()=>{navigator.clipboard.writeText(s).then(()=>{r.success("Task UUID Copy Successfully!")}).catch(e=>{r.error("Failed To Copy Task UUID.")})}})})]}),(0,n.jsxs)(g.Z,{direction:"row",spacing:3,children:[(0,n.jsx)(f.ZP,{onClick:()=>{let e=new Blob([s],{type:"text/plain"}),l=URL.createObjectURL(e),t=document.createElement("a");t.href=l,t.download="Task_UUID.txt",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(l)},size:"large",style:{width:"180px"},children:"Download as TXT"}),(0,n.jsx)(f.ZP,{type:"primary",size:"large",style:{width:"180px"},onClick:o,children:"Confirm Submission"})]})]}):(0,n.jsx)(a.Z,{sx:{marginBottom:"-40px"},children:(0,n.jsx)(f.ZP,{onClick:o,size:"large",danger:!0,style:{width:"300px"},children:"Confirm"})})})})};let{Title:z}=u.default,{Option:q}=d.default,{Dragger:B}=p.default,E=[{value:"hg38",label:"hg38"},{value:"hg19",label:"hg19"}],F=[{value:"sample",label:"Bulk Sequencing"},{value:"cell",label:"Single-cell Sequencing"},{value:"spot",label:"Spatial Transcriptomics"}],V=[{value:"bin",label:"Bin"},{value:"gene",label:"Gene"}],L=[{value:"int",label:"Integer"},{value:"log",label:"Log"}],H=e=>{var l;return Array.isArray(e)?e:null==e?void 0:null===(l=e.fileList)||void 0===l?void 0:l.slice(-1)};var M=e=>{let{}=e,[l,t]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1),[r,u]=(0,i.useState)(""),[p,y]=(0,i.useState)(!0),v=(0,c.z)();(0,o.useRouter)();let Z=async e=>{try{var l,n,i;t(!0);let a=new FormData;a.append("k",null!==(i=e.k)&&void 0!==i?i:10),a.append("ref",e.ref),a.append("obs_type",e.obs_type),a.append("window_type",e.window_type),a.append("value_type",e.value_type);let r=null===(n=e.input_file)||void 0===n?void 0:null===(l=n[0])||void 0===l?void 0:l.originFileObj;r&&a.append("input_file",r,r.name);let o=await I.Z.post((0,T.gR)(),a,{headers:{"Content-Type":"multipart/form-data"},timeout:6e5});u(o.data.data.uuid),y(!0),s(!0),v.success("Submit Success!")}catch(e){y(!1),s(!0),v.error("Submit Fail!")}finally{t(!1)}};return(0,n.jsxs)(x.Z,{spinning:l,tip:"Submitting, please wait...",size:"large",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 180px)"},children:[(0,n.jsxs)(g.Z,{sx:{px:"12px"},spacing:2,children:[(0,n.jsx)(z,{level:2,style:{marginTop:"12px",paddingBottom:"12px",borderBottom:"1px solid rgb(211, 211, 211)"},children:"Basic CNA Annotation"}),(0,n.jsx)(w,{onRunDemo:()=>{console.log("Run Demo!")},onViewResult:()=>{console.log("View Result!")},onHelp:()=>{console.log("Help!")}}),(0,n.jsx)(C,{})]}),(0,n.jsx)(m.Z,{style:{marginTop:24,borderRadius:8,border:"1px solid #eee",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:(0,n.jsxs)(h.Z,{layout:"vertical",onFinish:Z,initialValues:{k:10,ref:"hg38",obs_type:"sample",window_type:"bin",value_type:"int"},children:[(0,n.jsx)(h.Z.Item,{name:"k",label:"k",tooltip:"Parameter for clustering/nearest neighbors, default is 10",rules:[{type:"number",min:1,message:"k must be â‰¥ 1"}],children:(0,n.jsx)(b.Z,{style:{width:"100%"},placeholder:"10"})}),(0,n.jsx)(h.Z.Item,{name:"ref",label:"Reference",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select reference genome",children:E.map(e=>(0,n.jsx)(q,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"obs_type",label:"Obs Type",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select observation type",children:F.map(e=>(0,n.jsx)(q,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"window_type",label:"Window Type",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select window type",children:V.map(e=>(0,n.jsx)(q,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"value_type",label:"Value Type",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select value type",children:L.map(e=>(0,n.jsx)(q,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"input_file",label:"Input File",valuePropName:"fileList",getValueFromEvent:H,tooltip:"Upload CNA matrix file",rules:[{required:!0}],children:(0,n.jsxs)(B,{name:"file",multiple:!1,beforeUpload:()=>!1,accept:".csv",children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(R.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Drag file here, or click to select"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:"Supports CSV."})]})}),(0,n.jsx)(h.Z.Item,{children:(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(f.ZP,{type:"primary",htmlType:"submit",loading:l,children:"Submit"}),(0,n.jsx)(f.ZP,{htmlType:"reset",children:"Reset"})]})})]})}),(0,n.jsx)(O,{isModalOpen:a,setIsModelOpen:s,taskUUID:r,submissionStatus:p})]})};let{Title:X}=u.default,{Option:W}=d.default,{Dragger:G}=p.default,K=[{value:"hg38",label:"hg38"},{value:"hg19",label:"hg19"}],J=[{value:"sample",label:"Bulk Sequencing"},{value:"cell",label:"Single-cell Sequencing"},{value:"spot",label:"Spatial Transcriptomics"}],Q=e=>Array.isArray(e)?e:null==e?void 0:e.fileList;var Y=e=>{let{}=e,[l,t]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1),[r,u]=(0,i.useState)(""),[p,b]=(0,i.useState)(!0),y=(0,c.z)();(0,o.useRouter)();let v=async e=>{try{var l,n;t(!0);let i=new FormData;i.append("ref",e.ref),i.append("obs_type",e.obs_type);let a=null===(n=e.input_file)||void 0===n?void 0:null===(l=n[0])||void 0===l?void 0:l.originFileObj;for(let[e,l]of(a&&i.append("input_file",a,a.name),i.entries()))console.log(e,l);let r=await I.Z.post((0,T.DM)(),i,{headers:{"Content-Type":"multipart/form-data"},timeout:6e5});u(r.data.data.uuid),b(!0),s(!0),y.success("Submit Success!")}catch(e){b(!1),s(!0),y.error("Submit Fail!")}finally{t(!1)}};return(0,n.jsxs)(x.Z,{spinning:l,tip:"Submitting, please wait...",size:"large",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 180px)"},children:[(0,n.jsxs)(g.Z,{sx:{px:"12px"},spacing:2,children:[(0,n.jsx)(X,{level:2,style:{marginTop:"12px",paddingBottom:"12px",borderBottom:"1px solid rgb(211, 211, 211)"},children:"Recurrent CNA Annotation"}),(0,n.jsx)(w,{onRunDemo:()=>{console.log("Run Demo!")},onViewResult:()=>{console.log("View Result!")},onHelp:()=>{console.log("Help!")}}),(0,n.jsx)(C,{}),(0,n.jsx)(m.Z,{style:{marginTop:24,borderRadius:8,border:"1px solid #eee",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:(0,n.jsxs)(h.Z,{layout:"vertical",onFinish:v,initialValues:{ref:"hg38",obs_type:"sample"},children:[(0,n.jsx)(h.Z.Item,{name:"ref",label:"Reference",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select reference genome",children:K.map(e=>(0,n.jsx)(W,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"obs_type",label:"Obs Type",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select observation type",children:J.map(e=>(0,n.jsx)(W,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"input_file",label:"Input File",valuePropName:"fileList",getValueFromEvent:Q,tooltip:"Upload CNA matrix file",rules:[{required:!0}],children:(0,n.jsxs)(G,{name:"file",multiple:!1,beforeUpload:()=>!1,accept:".csv,.zip",children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(R.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Drag file here, or click to select"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:"Supports .csv and .zip."})]})}),(0,n.jsx)(h.Z.Item,{children:(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(f.ZP,{type:"primary",htmlType:"submit",loading:l,children:"Submit"}),(0,n.jsx)(f.ZP,{htmlType:"reset",children:"Reset"})]})})]})})]}),(0,n.jsx)(O,{isModalOpen:a,setIsModelOpen:s,taskUUID:r,submissionStatus:p})]})};let $={components:{Menu:{itemHeight:48,itemPaddingInline:20,fontSize:16}}},ee=[{key:"basicCNAAnnotation",label:"Basic CNA Annotation"},{key:"recurrentCNAAnnotation",label:"Recurrence CNA Annotation"}];var el=e=>{let{}=e,[l,t]=(0,i.useState)("basicCNAAnnotation");return(0,n.jsxs)(a.Z,{sx:{display:"flex",minHeight:"calc(100vh - 148px)"},children:[(0,n.jsx)(a.Z,{sx:{pt:"12px",width:350,borderRight:"1px solid #e5e5e5"},children:(0,n.jsx)(s.ZP,{theme:$,children:(0,n.jsx)(r.Z,{mode:"inline",selectedKeys:[l],onClick:e=>{let{key:l}=e;return t(l)},style:{borderRight:"none"},items:ee})})}),(0,n.jsx)(a.Z,{flex:1,p:3,overflow:"auto",children:(()=>{switch(l){case"basicCNAAnnotation":return(0,n.jsx)(M,{});case"recurrentCNAAnnotation":return(0,n.jsx)(Y,{});default:return null}})()})]})}}},function(e){e.O(0,[920,70,507,944,841,721,43,396,888,774,179],function(){return e(e.s=1992)}),_N_E=e.O()}]);