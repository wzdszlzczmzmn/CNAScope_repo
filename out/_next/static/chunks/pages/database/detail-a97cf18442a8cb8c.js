(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52],{7609:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/database/detail",function(){return n(1462)}])},9328:function(e,t,n){"use strict";var r=n(5893),a=n(5114);let l={"Bin Integer":"volcano","Bin Log":"magenta","Gene Integer":"blue","Gene Log":"purple"},o={"Bin Integer":"Bin Absolute","Bin Log":"Bin Log","Gene Integer":"Gene Absolute","Gene Log":"Gene Log"},i={backgroundColor:"#f0f0f0",color:"#555",border:"1px solid #d9d9d9"};t.Z=e=>{let{value:t}=e;if(!t)return(0,r.jsx)(a.Z,{value:"--",style:i});let n=l[t]||"default",s=o[t]||"--";return(0,r.jsx)(a.Z,{value:s,color:n})}},8498:function(e,t,n){"use strict";var r=n(5893),a=n(5114);let l={bulkDNA:"blue",bulkDNAles:"purple",scDNA:"green",scRNA:"orange",ST:"red"};t.Z=e=>{let{value:t}=e;if(!t)return(0,r.jsx)(a.Z,{value:"--",color:"default"});let n=l[t]||"default";return(0,r.jsx)(a.Z,{value:t,color:n})}},5168:function(e,t,n){"use strict";var r=n(5893),a=n(5114);let l={cell:"red",sample:"gold",spot:"lime"},o={backgroundColor:"#f0f0f0",color:"#555",border:"1px solid #d9d9d9"};t.Z=e=>{let{value:t}=e;if(!t)return(0,r.jsx)(a.Z,{value:"--",style:o});let n=l[t.toLowerCase()]||"default";return(0,r.jsx)(a.Z,{value:t,color:n})}},1597:function(e,t,n){"use strict";var r=n(5893),a=n(5114);let l={hg19:"blue",hg38:"green"};t.Z=e=>{let{value:t}=e;if(!t)return(0,r.jsx)(a.Z,{value:"--",color:"default"});let n=l[t]||"default";return(0,r.jsx)(a.Z,{value:t,color:n})}},3619:function(e,t,n){"use strict";var r=n(5893),a=n(5114);let l={"10x Official":"geekblue",cBioportal:"cyan",COSMIC:"magenta","GDC Portal":"volcano",HSCGD:"green",scTML:"orange"};t.Z=e=>{let{value:t}=e,n=l[t]||"default";return(0,r.jsx)(a.Z,{value:t,color:n})}},2252:function(e,t,n){"use strict";var r=n(5893),a=n(1550);t.Z=e=>{let{value:t,color:n="default"}=e;if(!t||"string"!=typeof t)return(0,r.jsx)(a.Z,{color:"default",children:"--"});let l=t.split(/[,/]/).map(e=>e.trim()).filter(Boolean);return(0,r.jsx)(r.Fragment,{children:l.map((e,t)=>(0,r.jsx)(a.Z,{color:n,children:e},"".concat(e,"-").concat(t)))})}},1462:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return tE}});var r=n(5893),a=n(1163),l=n(6976),o=n(8244),i=n(8106);let s=e=>{let{data:t,error:n,isLoading:r,mutate:a}=(0,l.ZP)(e?(0,o.tj)(e):null,i._);return{dataset:t||[],isLoading:r,isError:n,mutate:a}};var c=n(9967),d=n(1080),p=n(9008),x=n.n(p),h=n(9073),g=n(3368),u=n(9555),m=n(8514),f=n(2395),j=n(5114),v=n(1664),y=n.n(v),C=n(4),w=n(3619),S=n(8498),Z=n(5168),_=n(2252),b=n(9328),z=n(1597),N=n(5098);let A=e=>[{key:"name",label:"Dataset Name",children:(0,r.jsx)(u.Z,{title:e.link,children:(0,r.jsx)(y(),{href:e.link,target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(j.Z,{value:e.name,color:"purple",style:{cursor:"pointer"}})})})},{key:"fullName",label:"Dataset Full Name",children:(0,r.jsx)(C.Z,{text:e.full_name,width:300})},{key:"source",label:"Source",children:(0,r.jsx)(w.Z,{value:e.source})},{key:"programme",label:"Programme",children:e.programme||"--"},{key:"modality",label:"Modality",children:(0,r.jsx)(S.Z,{value:e.modality})},{key:"obsType",label:"Observation Type",children:(0,r.jsx)(Z.Z,{value:e.obs_type})},{key:"protocol",label:"Protocol",children:(0,r.jsx)(_.Z,{value:e.protocol,color:"cyan"})},{key:"platform",label:"Platform",children:e.platform||"--"},{key:"workflow",label:"Workflow",children:(0,r.jsx)(_.Z,{value:e.workflow,color:"geekblue"})},{key:"cnType",label:"CNA Value Type",children:(0,r.jsx)(b.Z,{value:e.cn_type})},{key:"reference",label:"Reference",children:(0,r.jsx)(z.Z,{value:e.reference})},{key:"cancerType",label:"Cancer Type",children:e.cancer_type||"--"},{key:"cancerTypeFullName",label:"Cancer Type Full Name",children:e.cancer_type_full_name||"--"},{key:"sampleNum",label:"Sample Num",children:e.sample_num||"--"},{key:"cellNum",label:"Cell Num",children:e.cell_num||"--"},{key:"spotNum",label:"Spot Num",children:e.spot_num||"--"}];var k=e=>{let{dataset:t,resetTutorialState:n}=e,a=A(t);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:6,sx:{borderBottom:"2px solid #e0e0e0",mb:"36px",paddingBottom:"12px"},children:[(0,r.jsx)(g.Z,{component:"h6",sx:{fontSize:"36px"},children:"Dataset Information"}),(0,r.jsx)(m.ZP,{type:"primary",icon:(0,r.jsx)(N.Z,{}),onClick:n,children:"View Tutorial"})]}),(0,r.jsx)(f.Z,{bordered:!0,items:a,column:2,labelStyle:{fontWeight:"bold"}})]})};let L=e=>{let{data:t,error:n,isLoading:r,mutate:a}=(0,l.ZP)(e?(0,o.N0)(e):null,i._);return{samples:t||[],isLoading:r,isError:n,mutate:a}};var T=n(7980);let I=[{title:"Sample ID",dataIndex:"sample_id",sorter:(e,t)=>e.sample_id.toLowerCase().localeCompare(t.sample_id.toLowerCase()),fixed:"left",align:"center",render:e=>(0,r.jsx)(j.Z,{value:e,color:"volcano"})},{title:"Disease Type",dataIndex:"disease_type",sorter:(e,t)=>e.disease_type.toLowerCase().localeCompare(t.disease_type.toLowerCase()),align:"center",render:e=>(0,r.jsx)(h.Z,{sx:{alignItems:"center"},children:(0,r.jsx)(C.Z,{text:e})})},{title:"Primary Site",dataIndex:"primary_site",sorter:(e,t)=>e.primary_site.toLowerCase().localeCompare(t.primary_site.toLowerCase()),align:"center",render:e=>(0,r.jsx)(C.Z,{text:e})},{title:"Tumor Stage",dataIndex:"tumor_stage",sorter:(e,t)=>e.tumor_stage.toLowerCase().localeCompare(t.tumor_stage.toLowerCase()),align:"center",render:e=>e||"--"},{title:"Tumor Grade",dataIndex:"tumor_grade",sorter:(e,t)=>e.tumor_grade.toLowerCase().localeCompare(t.tumor_grade.toLowerCase()),align:"center",render:e=>e||"--"},{title:"Ethnicity",dataIndex:"ethnicity",sorter:(e,t)=>e.ethnicity.toLowerCase().localeCompare(t.ethnicity.toLowerCase()),align:"center",render:e=>(0,r.jsx)(C.Z,{text:e})},{title:"Race",dataIndex:"race",sorter:(e,t)=>e.race.toLowerCase().localeCompare(t.race.toLowerCase()),align:"center",render:e=>(0,r.jsx)(C.Z,{text:e})},{title:"Gender",dataIndex:"gender",sorter:(e,t)=>e.gender.toLowerCase().localeCompare(t.gender.toLowerCase()),align:"center",render:e=>e||"--"},{title:"Age",dataIndex:"age",sorter:(e,t)=>{var n,r;return(null!==(n=e.age)&&void 0!==n?n:0)-(null!==(r=t.age)&&void 0!==r?r:0)},align:"center",render:e=>e||"--"},{title:"PFS",dataIndex:"pfs",sorter:(e,t)=>{var n,r;return(null!==(n=e.pfs)&&void 0!==n?n:0)-(null!==(r=t.pfs)&&void 0!==r?r:0)},align:"center",render:e=>e||"--"},{title:"Days To Death",dataIndex:"days_to_death",sorter:(e,t)=>{var n,r;return(null!==(n=e.days_to_death)&&void 0!==n?n:0)-(null!==(r=t.days_to_death)&&void 0!==r?r:0)},align:"center",render:e=>e||"--"},{title:"PFS Status",dataIndex:"pfs_status",align:"center"},{title:"Vital Status",dataIndex:"vital_status",align:"center"}],B=e=>{let{dataset:t}=e,{samples:n,isLoading:a,isError:l}=L(t.name);return a?(0,r.jsx)(c.Z,{containerSx:{height:"40vh",marginTop:"40px"}}):l?(0,r.jsx)(d.Z,{containerSx:{height:"40vh",marginTop:"40px"}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{component:"h6",sx:{fontSize:"36px",borderBottom:"2px solid #e0e0e0",mb:"36px",paddingBottom:"12px"},children:"Samples List"}),(0,r.jsx)(T.k,{columns:I,rowKey:e=>e.sample_id,dataSource:n,scroll:{x:"max-content"}})]})},F=e=>"10x Official"===e?[{title:"Cell ID",dataIndex:"cell_id",sorter:(e,t)=>e.cell_id.toLowerCase().localeCompare(t.cell_id.toLowerCase()),fixed:"left",align:"center",render:e=>(0,r.jsx)(j.Z,{value:e,color:"volcano"})},{title:"Total Num Reads",dataIndex:"total_num_reads",sorter:(e,t)=>e.total_num_reads-t.total_num_reads,align:"center",render:e=>e||"--"},{title:"Num UnMapped Reads",dataIndex:"num_unmapped_reads",sorter:(e,t)=>e.num_unmapped_reads-t.num_unmapped_reads,align:"center",render:e=>e||"--"},{title:"Num Lowmapq Reads",dataIndex:"num_lowmapq_reads",sorter:(e,t)=>e.num_lowmapq_reads-t.num_lowmapq_reads,align:"center",render:e=>e||"--"},{title:"Num Duplicate Reads",dataIndex:"num_duplicate_reads",sorter:(e,t)=>e.num_duplicate_reads-t.num_duplicate_reads,align:"center",render:e=>e||"--"},{title:"Num Mapped Dedup Reads",dataIndex:"num_mapped_dedup_reads",sorter:(e,t)=>e.num_mapped_dedup_reads-t.num_mapped_dedup_reads,align:"center",render:e=>e||"--"},{title:"Fraction Mapped Duplicates",dataIndex:"frac_mapped_duplicates",sorter:(e,t)=>e.frac_mapped_duplicates-t.frac_mapped_duplicates,align:"center",render:e=>e||"--"},{title:"Effective Depth of Coverage",dataIndex:"effective_depth_of_coverage",sorter:(e,t)=>e.effective_depth_of_coverage-t.effective_depth_of_coverage,align:"center",render:e=>e||"--"},{title:"Effective Reads per 1Mbp",dataIndex:"effective_reads_per_1Mbp",sorter:(e,t)=>e.effective_reads_per_1Mbp-t.effective_reads_per_1Mbp,align:"center",render:e=>e||"--"},{title:"Raw MapD",dataIndex:"raw_mapd",sorter:(e,t)=>e.raw_mapd-t.raw_mapd,align:"center",render:e=>e||"--"},{title:"Normalized MapD",dataIndex:"normalized_mapd",sorter:(e,t)=>e.normalized_mapd-t.normalized_mapd,align:"center",render:e=>e||"--"},{title:"Raw DimapD",dataIndex:"raw_dimapd",sorter:(e,t)=>e.raw_dimapd-t.raw_dimapd,align:"center",render:e=>e||"--"},{title:"Normalized DimapD",dataIndex:"normalized_dimapd",sorter:(e,t)=>e.normalized_dimapd-t.normalized_dimapd,align:"center",render:e=>e||"--"},{title:"Mean Ploidy",dataIndex:"mean_ploidy",sorter:(e,t)=>e.mean_ploidy-t.mean_ploidy,align:"center",render:e=>e||"--"},{title:"Ploidy Confidence",dataIndex:"ploidy_confidence",sorter:(e,t)=>e.ploidy_confidence-t.ploidy_confidence,align:"center",render:e=>e||"--"},{title:"Is High DimapD",dataIndex:"is_high_dimapd",sorter:(e,t)=>e.is_high_dimapd-t.is_high_dimapd,align:"center",render:e=>e||"--"},{title:"Is Noisy",dataIndex:"is_noisy",sorter:(e,t)=>e.is_noisy-t.is_noisy,align:"center",render:e=>e||"--"},{title:"Estimated CNV Resolution (MB)",dataIndex:"est_cnv_resolution_mb",sorter:(e,t)=>e.est_cnv_resolution_mb-t.est_cnv_resolution_mb,align:"center",render:e=>e||"--"}]:[{title:"Cell ID",dataIndex:"cell_id",sorter:(e,t)=>e.cell_id.toLowerCase().localeCompare(t.cell_id.toLowerCase()),align:"center",render:e=>(0,r.jsx)(j.Z,{value:e,color:"volcano"})},{title:"Dataset Name",dataIndex:"dataset_name",sorter:(e,t)=>e.dataset_name.toLowerCase().localeCompare(t.dataset_name.toLowerCase()),align:"center",render:e=>e||"--"},{title:"Cell Type",dataIndex:"cell_type",sorter:(e,t)=>e.cell_type.toLowerCase().localeCompare(t.cell_type.toLowerCase()),align:"center",render:e=>e||"--"},{title:"Confidence",dataIndex:"confidence",sorter:(e,t)=>e.confidence-t.confidence,align:"center",render:e=>e||"--"},{title:"Donor",dataIndex:"donor",sorter:(e,t)=>e.donor.toLowerCase().localeCompare(t.donor.toLowerCase()),align:"center",render:e=>e||"--"},{title:"CNV Score",dataIndex:"cnv_score",sorter:(e,t)=>e.cnv_score-t.cnv_score,align:"center",render:e=>e||"--"},{title:"CNV Status",dataIndex:"cnv_status",sorter:(e,t)=>e.cnv_status.toLowerCase().localeCompare(t.cnv_status.toLowerCase()),align:"center",render:e=>e||"--"},{title:"Malignancy",dataIndex:"malignancy",sorter:(e,t)=>e.malignancy.toLowerCase().localeCompare(t.malignancy.toLowerCase()),align:"center",render:e=>e||"--"},{title:"Cell Label",dataIndex:"cell_label",sorter:(e,t)=>e.cell_label.toLowerCase().localeCompare(t.cell_label.toLowerCase()),align:"center",render:e=>e||"--"}],P=e=>{let{dataset:t}=e,{samples:n,isLoading:a,isError:l}=L(t.name),o=F(t.source);return a?(0,r.jsx)(c.Z,{containerSx:{height:"40vh",marginTop:"40px"}}):l?(0,r.jsx)(d.Z,{containerSx:{height:"40vh",marginTop:"40px"}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{component:"h6",sx:{fontSize:"36px",borderBottom:"2px solid #e0e0e0",mb:"36px",paddingBottom:"12px"},children:"Cells List"}),(0,r.jsx)(T.k,{columns:o,rowKey:e=>e.cell_id,dataSource:n,scroll:{x:"max-content"}})]})},R=[{title:"Cell ID",dataIndex:"cell_id",sorter:(e,t)=>{var n,r;return null===(r=e.cell_id)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.cell_id)||void 0===n?void 0:n.toLowerCase())},fixed:"left",align:"center",render:e=>(0,r.jsx)(j.Z,{value:e,color:"volcano"})},{title:"Dataset Name",dataIndex:"dataset_name",sorter:(e,t)=>{var n,r;return null===(r=e.dataset_name)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.dataset_name)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"Cell Type",dataIndex:"cell_type",sorter:(e,t)=>{var n,r;return null===(r=e.cell_type)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.cell_type)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"Confidence",dataIndex:"confidence",sorter:(e,t)=>{var n,r;return null===(r=e.confidence)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.confidence)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"Donor",dataIndex:"donor",sorter:(e,t)=>{var n,r;return null===(r=e.donor)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.donor)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"CNV Score",dataIndex:"cnv_score",sorter:(e,t)=>{var n,r;return(null!==(n=e.cnv_score)&&void 0!==n?n:-1/0)-(null!==(r=t.cnv_score)&&void 0!==r?r:-1/0)},align:"center",render:e=>null!=e?e:"--"},{title:"CNV Status",dataIndex:"cnv_status",sorter:(e,t)=>{var n,r;return null===(r=e.cnv_status)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.cnv_status)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"Malignancy",dataIndex:"malignancy",sorter:(e,t)=>{var n,r;return null===(r=e.malignancy)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.malignancy)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"Cell Label",dataIndex:"cell_label",sorter:(e,t)=>{var n,r;return null===(r=e.cell_label)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.cell_label)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"}],D=e=>{let{dataset:t}=e,{samples:n,isLoading:a,isError:l}=L(t.name);return a?(0,r.jsx)(c.Z,{containerSx:{height:"40vh",marginTop:"40px"}}):l?(0,r.jsx)(d.Z,{containerSx:{height:"40vh",marginTop:"40px"}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{component:"h6",sx:{fontSize:"36px",borderBottom:"2px solid #e0e0e0",mb:"36px",paddingBottom:"12px"},children:"Cells List"}),(0,r.jsx)(T.k,{columns:R,rowKey:e=>e.cell_id,dataSource:n,scroll:{x:"max-content"}})]})},M=[{title:"Spot ID",dataIndex:"spot_id",sorter:(e,t)=>{var n,r;return null===(r=e.spot_id)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.spot_id)||void 0===n?void 0:n.toLowerCase())},fixed:"left",align:"center",render:e=>(0,r.jsx)(j.Z,{value:e,color:"volcano"})},{title:"Dataset Name",dataIndex:"dataset_name",sorter:(e,t)=>{var n,r;return null===(r=e.dataset_name)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.dataset_name)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"Cell Type",dataIndex:"cell_type",sorter:(e,t)=>{var n,r;return null===(r=e.cell_type)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.cell_type)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"Confidence",dataIndex:"confidence",sorter:(e,t)=>{var n,r;return null===(r=e.confidence)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.confidence)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"Donor",dataIndex:"donor",sorter:(e,t)=>{var n,r;return null===(r=e.donor)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.donor)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"CNV Score",dataIndex:"cnv_score",sorter:(e,t)=>{var n,r;return(null!==(n=e.cnv_score)&&void 0!==n?n:-1/0)-(null!==(r=t.cnv_score)&&void 0!==r?r:-1/0)},align:"center",render:e=>null!=e?e:"--"},{title:"CNV Status",dataIndex:"cnv_status",sorter:(e,t)=>{var n,r;return null===(r=e.cnv_status)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.cnv_status)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"Malignancy",dataIndex:"malignancy",sorter:(e,t)=>{var n,r;return null===(r=e.malignancy)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.malignancy)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"Cell Label",dataIndex:"cell_label",sorter:(e,t)=>{var n,r;return null===(r=e.cell_label)||void 0===r?void 0:r.toLowerCase().localeCompare(null===(n=t.cell_label)||void 0===n?void 0:n.toLowerCase())},align:"center",render:e=>e||"--"},{title:"Spatial 1",dataIndex:"spatial_1",sorter:(e,t)=>{var n,r;return(null!==(n=e.spatial_1)&&void 0!==n?n:-1/0)-(null!==(r=t.spatial_1)&&void 0!==r?r:-1/0)},align:"center",render:e=>null!=e?e:"--"},{title:"Spatial 2",dataIndex:"spatial_2",sorter:(e,t)=>{var n,r;return(null!==(n=e.spatial_2)&&void 0!==n?n:-1/0)-(null!==(r=t.spatial_2)&&void 0!==r?r:-1/0)},align:"center",render:e=>null!=e?e:"--"}],G=e=>{let{dataset:t}=e,{samples:n,isLoading:a,isError:l}=L(t.name);return a?(0,r.jsx)(c.Z,{containerSx:{height:"40vh",marginTop:"40px"}}):l?(0,r.jsx)(d.Z,{containerSx:{height:"40vh",marginTop:"40px"}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{component:"h6",sx:{fontSize:"36px",borderBottom:"2px solid #e0e0e0",mb:"36px",paddingBottom:"12px"},children:"Cells List"}),(0,r.jsx)(T.k,{columns:M,rowKey:e=>e.spot_id,dataSource:n,scroll:{x:"max-content"}})]})};var E=n(7294),W=n(530),V=n(2492),O=n(3721),H=n(6247);let{Text:K}=W.default,{Option:Y}=V.default,X=e=>{let t=[{label:"5M",value:"5M"}];return"GDC Portal"===e.source&&(t.push({label:"500kb",value:"500kb"}),t.push({label:"200kb",value:"200kb"})),t};var q=e=>{let{dataset:t,workflow:n,selectedWorkflow:a,handleSelectedWorkflowChange:l,binSize:o,handleBinSizeChange:i}=e,s=X(t);return(0,r.jsxs)(O.Z,{style:{width:"100%"},title:(0,r.jsx)(g.Z,{component:"h6",sx:{fontSize:"36px",mt:"12px",mb:"12px"},children:"Workflow Selector"}),children:[(0,r.jsx)(K,{type:"secondary",style:{fontSize:"20px"},children:"Select a workflow to view CNA features, and specify the desired Bin Size to refine the results."}),(0,r.jsxs)(H.Z,{container:!0,spacing:2,children:[(0,r.jsx)(H.Z,{size:6,sx:{marginTop:2},children:(0,r.jsxs)(h.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,r.jsx)(g.Z,{component:"span",sx:{fontSize:"20px",fontWeight:"bold",whiteSpace:"nowrap"},children:"Workflow:"}),(0,r.jsx)(V.default,{style:{width:"100%"},placeholder:"Please select a Workflow",onChange:l,value:a,size:"large",children:(n?n.split(","):["NA"]).map(e=>(0,r.jsx)(Y,{value:e,style:{fontSize:"16px"},children:e},e))})]})}),(0,r.jsx)(H.Z,{size:6,sx:{marginTop:2},children:(0,r.jsxs)(h.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,r.jsx)(g.Z,{component:"span",sx:{fontSize:"20px",fontWeight:"bold",whiteSpace:"nowrap"},children:"Bin Size:"}),(0,r.jsx)(V.default,{style:{width:"100%"},placeholder:"Please select a Bin Size",onChange:i,value:o,size:"large",children:s.map((e,t)=>(0,r.jsx)(Y,{value:e.value,style:{fontSize:"16px"},children:e.label},t))})]})})]})]})};let U=(e,t,n)=>{let{data:r,error:a,isLoading:s,mutate:c}=(0,l.ZP)((0,o.$V)(e,t,n),i._);return{matrix:r,isMatrixLoading:s,isMatrixError:a,mutate:c}};var $=n(9897),J=n(1804);let Q=(e,t,n)=>{let{data:r,error:a,isLoading:s,mutate:c}=(0,l.ZP)((0,o.l$)(e,t,n),i._);return{tree:r,isTreeLoading:s,isTreeError:a,mutate:c}};var ee=n(9141),et=n(1218),en=n(2707);let er=e=>{let{selectedWorkflow:t,dataset:n,vizRef:a,binSize:l}=e,{matrix:o,isMatrixLoading:i,isMatrixError:s}=U(n.name,t,l),{meta:p,isMetaLoading:x,isMetaError:h}=(0,J.g)(n.name,t,l),{tree:g,isTreeLoading:u,isTreeError:m}=Q(n.name,t,l);if(i||x||u)return(0,r.jsx)(c.Z,{height:"920px"});if(s||h||m)return(0,r.jsx)(d.Z,{height:"920px"});let f="Bin Integer"===n.cn_type?2:0;return(0,r.jsx)(ee.Z,{matrix:o,meta:p,tree:g,baselineCNA:f,reference:n.reference,binSize:l,vizRef:a})};var ea=e=>{let{selectedWorkflow:t,dataset:n,binSize:a}=e,l=(0,E.useRef)(null);return(0,r.jsxs)(h.Z,{spacing:4,children:[(0,r.jsxs)(h.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,r.jsxs)(g.Z,{component:"h6",sx:{fontSize:"36px"},children:["Bin-Level CNA Heatmap(",(0,r.jsx)(en.Z,{CNType:n.cn_type,iconStyle:{fontSize:"24px"}}),")"]}),(0,r.jsx)(h.Z,{direction:"row",spacing:2,children:(0,r.jsx)(m.ZP,{type:"primary",onClick:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,r.jsx)(et.Z,{}),children:"Download SVG Chart"})})]}),(0,r.jsx)($.Z,{children:(0,r.jsx)(er,{selectedWorkflow:t,dataset:n,vizRef:l,binSize:a})})]})},el=n(6011),eo=n(9795),ei=n(1499),es=n(9170);let ec=e=>{let{selectedWorkflow:t,dataset:n,binSize:a,vizRef:l}=e,{meta:i,isMetaLoading:s,isMetaError:p}=(0,J.g)(n.name,t,a),{newick:x,isNewickLoading:h,isNewickError:g}=(0,eo.I)(n.name,t,a),{genes:u,isGenesLoading:m,isGenesError:f}=(0,el.O)(n.name,t,a),j="Bin Integer"===n.cn_type?2:0;return s||h||m?(0,r.jsx)(c.Z,{height:"920px"}):p||g||f?(0,r.jsx)(d.Z,{height:"920px"}):(0,r.jsx)(es.Z,{entity:"Gene",meta:i,newick:x,genes:u,geneMatrixFetcher:e=>ei.Z.post((0,o.h8)(),{datasetName:n.name,workflowType:t,genes:e}),baselineCNA:j,vizRef:l})};var ed=e=>{let{selectedWorkflow:t,dataset:n,binSize:a}=e,l=(0,E.useRef)(null);return(0,r.jsxs)(h.Z,{spacing:4,children:[(0,r.jsxs)(h.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,r.jsxs)(g.Z,{component:"h6",sx:{fontSize:"36px"},children:["Gene-Level CNA Heatmap(",(0,r.jsx)(en.Z,{CNType:n.cn_type,iconStyle:{fontSize:"24px"}}),")"]}),(0,r.jsx)(h.Z,{direction:"row",spacing:2,children:(0,r.jsx)(m.ZP,{type:"primary",onClick:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,r.jsx)(et.Z,{}),children:"Download SVG Chart"})})]}),(0,r.jsx)($.Z,{children:(0,r.jsx)(ec,{dataset:n,selectedWorkflow:t,binSize:a,vizRef:l})})]})},ep=n(4299);let ex=e=>{let{selectedWorkflow:t,dataset:n,vizRef:a,binSize:l}=e,{meta:i,isMetaLoading:s,isMetaError:p}=(0,J.g)(n.name,t,l),{newick:x,isNewickLoading:h,isNewickError:g}=(0,eo.I)(n.name,t,l),{terms:u,isTermsLoading:m,isTermsError:f}=(0,ep.y)(n.name,t,l),j="Bin Integer"===n.cn_type?2:0;return s||h||m?(0,r.jsx)(c.Z,{height:"920px"}):p||g||f?(0,r.jsx)(d.Z,{height:"920px"}):(0,r.jsx)(es.Z,{entity:"Term",meta:i,newick:x,genes:u,geneMatrixFetcher:e=>ei.Z.post((0,o.l4)(),{datasetName:n.name,workflowType:t,binSize:l,terms:e}),baselineCNA:j,vizRef:a})};var eh=e=>{let{selectedWorkflow:t,dataset:n,binSize:a}=e,l=(0,E.useRef)(null);return(0,r.jsxs)(h.Z,{spacing:4,children:[(0,r.jsxs)(h.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,r.jsxs)(g.Z,{component:"h6",sx:{fontSize:"36px"},children:["Term-Level CNA Heatmap(",(0,r.jsx)(en.Z,{CNType:n.cn_type,iconStyle:{fontSize:"24px"}}),")"]}),(0,r.jsx)(h.Z,{direction:"row",spacing:2,children:(0,r.jsx)(m.ZP,{type:"primary",onClick:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,r.jsx)(et.Z,{}),children:"Download SVG Chart"})})]}),(0,r.jsx)($.Z,{children:(0,r.jsx)(ex,{selectedWorkflow:t,dataset:n,vizRef:l,binSize:a})})]})},eg=n(1076),eu=n(1333),em=n(1927);let ef=(e,t,n)=>{let{data:r,error:a,isLoading:s,mutate:c}=(0,l.ZP)((0,o.WQ)(e,t,n),i._),d=[];if(r)try{d=em.ueB(r,em.rA8)}catch(e){console.error("Error parsing CSV:",e)}return{topCNVariances:d,isTopCNVariancesLoading:s,isTopCNVariancesError:a,mutate:c}},ej=e=>{let{selectedWorkflow:t,dataset:n,vizRef:a,binSize:l}=e,{meta:i,isMetaLoading:s,isMetaError:p}=(0,J.g)(n.name,t,l),{newick:x,isNewickLoading:h,isNewickError:g}=(0,eo.I)(n.name,t,l),{topCNVariances:u,isTopCNVariancesLoading:m,isTopCNVariancesError:f}=ef(n.name,t,l),{parsedMeta:j,embeddingMethods:v,extents:y}=(0,E.useMemo)(()=>i?(0,eu.Rr)(i):{parsedMeta:[],embeddingMethods:[],extents:{}},[i]),{binOptions:C,geneOptions:w,termOptions:S}=(0,E.useMemo)(()=>u?(0,eu.vK)(u):{binOptions:[],geneOptions:[],termOptions:[]},[u]),Z="Gene Log"===n.cn_type||"Bin Log"===n.cn_type;return s||h||m?(0,r.jsx)(c.Z,{height:"920px"}):p||g||f?(0,r.jsx)(d.Z,{height:"920px"}):(0,r.jsx)(eg.Z,{meta:j,embeddingMethods:v,extents:y,newick:x,bins:C,genes:w,terms:S,dataset:n,binVectorFetcher:e=>ei.Z.post((0,o.kH)(),{datasetName:n.name,workflowType:t,binSize:l,bins:[e]}),geneVectorFetcher:e=>ei.Z.post((0,o.h8)(),{datasetName:n.name,workflowType:t,binSize:l,genes:[e]}),termVectorFetcher:e=>ei.Z.post((0,o.l4)(),{datasetName:n.name,workflowType:t,binSize:l,terms:[e]}),isLog:Z,vizRef:a})};var ev=e=>{let{selectedWorkflow:t,dataset:n,binSize:a}=e,l=(0,E.useRef)(null);return(0,r.jsxs)(h.Z,{spacing:4,children:[(0,r.jsxs)(h.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,r.jsxs)(g.Z,{component:"h6",sx:{fontSize:"36px"},children:["CNA Embedding Map(",(0,r.jsx)(en.Z,{CNType:n.cn_type,iconStyle:{fontSize:"24px"}}),")"]}),(0,r.jsx)(h.Z,{direction:"row",spacing:2,children:(0,r.jsx)(m.ZP,{type:"primary",onClick:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,r.jsx)(et.Z,{}),children:"Download SVG Chart"})})]}),(0,r.jsx)($.Z,{children:(0,r.jsx)(ej,{dataset:n,selectedWorkflow:t,vizRef:l,binSize:a})})]})},ey=n(8292);let eC=e=>{let{selectedWorkflow:t,dataset:n,vizRef:a,binSize:l}=e,{matrix:o,isMatrixLoading:i,isMatrixError:s}=U(n.name,t,l),{meta:p,isMetaLoading:x,isMetaError:h}=(0,J.g)(n.name,t,l),{newick:g,isNewickLoading:u,isNewickError:m}=(0,eo.I)(n.name,t,l),f="Bin Integer"===n.cn_type?2:0;return i||x||u?(0,r.jsx)(c.Z,{height:"920px"}):s||h||m?(0,r.jsx)(d.Z,{height:"920px"}):(0,r.jsx)(ey.Z,{matrix:o,meta:p,newick:g,dataset:n,baselineCNA:f,reference:n.reference,vizRef:a})};var ew=e=>{let{selectedWorkflow:t,dataset:n,binSize:a}=e,l=(0,E.useRef)(null);return(0,r.jsxs)(h.Z,{spacing:4,children:[(0,r.jsxs)(h.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,r.jsxs)(g.Z,{component:"h6",sx:{fontSize:"36px"},children:["CN Stairstep(",(0,r.jsx)(en.Z,{CNType:n.cn_type,iconStyle:{fontSize:"24px"}}),")"]}),(0,r.jsx)(h.Z,{direction:"row",spacing:2,children:(0,r.jsx)(m.ZP,{type:"primary",onClick:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,r.jsx)(et.Z,{}),children:"Download SVG Chart"})})]}),(0,r.jsx)($.Z,{children:(0,r.jsx)(eC,{selectedWorkflow:t,dataset:n,vizRef:l,binSize:a})})]})},eS=n(6577),eZ=e=>{let{data:t,error:n,isLoading:r,mutate:a}=(0,l.ZP)((0,o.U$)(e),i._);return{focalOptions:t||[],isFocalOptionsLoading:r,isFocalOptionsError:n,mutate:a}};let e_=e=>{let{dataset:t,vizRef:n}=e,{focalOptions:a,isFocalOptionsLoading:l,isFocalOptionsError:o}=eZ(t.name);return l?(0,r.jsx)(c.Z,{height:"920px"}):o?(0,r.jsx)(d.Z,{height:"920px"}):(0,r.jsx)(eS.Z,{datasetName:t.name,focalOptions:a,reference:t.reference,vizRef:n})};var eb=e=>{let{dataset:t}=e,n=(0,E.useRef)(null);return(0,r.jsxs)(h.Z,{spacing:4,children:[(0,r.jsxs)(h.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,r.jsxs)(g.Z,{component:"h6",sx:{fontSize:"36px"},children:["Focal CNA & Gene(",(0,r.jsx)(en.Z,{CNType:t.cn_type,iconStyle:{fontSize:"24px"}}),")"]}),(0,r.jsx)(h.Z,{direction:"row",spacing:2,children:(0,r.jsx)(m.ZP,{type:"primary",onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,r.jsx)(et.Z,{}),children:"Download SVG Chart"})})]}),(0,r.jsx)($.Z,{children:(0,r.jsx)(e_,{dataset:t,vizRef:n})})]})},ez=n(1023);let eN=e=>{let{selectedWorkflow:t,dataset:n,vizRef:a,binSize:l}=e,{meta:o,isMetaLoading:i,isMetaError:s}=(0,J.g)(n.name,t,l),{newick:p,isNewickLoading:x,isNewickError:h}=(0,eo.I)(n.name,t,l);return i||x?(0,r.jsx)(c.Z,{height:"920px"}):s||h?(0,r.jsx)(d.Z,{height:"920px"}):(0,r.jsx)(ez.Z,{meta:o,newick:p,vizRef:a})};var eA=e=>{let{selectedWorkflow:t,dataset:n,binSize:a}=e,l=(0,E.useRef)(null);return(0,r.jsxs)(h.Z,{spacing:4,children:[(0,r.jsxs)(h.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,r.jsxs)(g.Z,{component:"h6",sx:{fontSize:"36px"},children:["CNA Phylogenetic Tree(",(0,r.jsx)(en.Z,{CNType:n.cn_type,iconStyle:{fontSize:"24px"}}),")"]}),(0,r.jsx)(h.Z,{direction:"row",spacing:2,children:(0,r.jsx)(m.ZP,{type:"primary",onClick:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,r.jsx)(et.Z,{}),children:"Download SVG Chart"})})]}),(0,r.jsx)($.Z,{children:(0,r.jsx)(eN,{selectedWorkflow:t,dataset:n,vizRef:l,binSize:a})})]})};let ek=(e,t,n)=>{let{data:r,error:a,isLoading:s,mutate:c}=(0,l.ZP)((0,o.gy)(e,t,n),i._);return{distributions:r,isDistributionsLoading:s,isDistributionsError:a,mutate:c}};var eL=n(4665);let eT=e=>{let{selectedWorkflow:t,dataset:n,vizRef:a,binSize:l}=e,{distributions:o,isDistributionsLoading:i,isDistributionsError:s}=ek(n.name,t,l);return i?(0,r.jsx)(c.Z,{height:"920px"}):s?(0,r.jsx)(d.Z,{height:"920px"}):(0,r.jsx)(eL.Z,{distributions:o,vizRef:a})};var eI=e=>{let{selectedWorkflow:t,dataset:n,binSize:a}=e,l=(0,E.useRef)(null);return(0,r.jsxs)(h.Z,{spacing:4,children:[(0,r.jsxs)(h.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,r.jsxs)(g.Z,{component:"h6",sx:{fontSize:"36px"},children:["CN Distribution(",(0,r.jsx)(en.Z,{CNType:n.cn_type,iconStyle:{fontSize:"24px"}}),")"]}),(0,r.jsx)(h.Z,{direction:"row",spacing:2,children:(0,r.jsx)(m.ZP,{type:"primary",onClick:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,r.jsx)(et.Z,{}),children:"Download SVG Chart"})})]}),(0,r.jsx)($.Z,{children:(0,r.jsx)(eT,{selectedWorkflow:t,dataset:n,vizRef:l,binSize:a})})]})},eB=n(1993),eF=n(782);let eP=(0,eB.U)((0,eF.tJ)(e=>({hasSeenTutorial:!1,setHasSeenTutorial:()=>e({hasSeenTutorial:!0}),resetTutorialState:()=>e({hasSeenTutorial:!1})}),{name:"tutorial-state",storage:(0,eF.FL)(()=>sessionStorage)}));var eR=n(8530),eD=n(3074),eM=n(1447);let{Title:eG,Paragraph:eE}=W.default,eW=[{title:"Step 1: Overview Dataset Info",content:(0,r.jsx)(e=>{let{}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eG,{level:4,style:{margin:0,marginBottom:"8px",fontSize:"32px"},children:"Dataset Information Panel"}),(0,r.jsxs)(eE,{style:{fontSize:"20px"},children:["You will find information such as the ",(0,r.jsx)("strong",{children:"dataset name"}),", ",(0,r.jsx)("strong",{children:"source"}),", ",(0,r.jsx)("strong",{children:"modality"}),", ",(0,r.jsx)("strong",{children:"observation type"}),", ",(0,r.jsx)("strong",{children:"workflow"}),", ",(0,r.jsx)("strong",{children:"protocol"}),", etc. This provides a comprehensive overview of essential metadata and dataset statistics, enabling users to quickly understand the scope and contents of the dataset."]}),(0,r.jsx)(eR.Z,{src:"/tutorial/DatasetOverview.png",alt:"DatasetOverview.png"})]})},{})},{title:"Step 2: Explore Sample Info",content:(0,r.jsx)(e=>{let{}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eG,{level:4,style:{margin:0,marginBottom:"8px",fontSize:"32px"},children:"Sample List Panel"}),(0,r.jsxs)(eE,{style:{fontSize:"20px"},children:["The Samples List section on CNAScope provides a detailed tabular overview of individual samples within a dataset, such as the TCGA-ACC cohort, showcasing key clinical and demographic data. Columns include ",(0,r.jsx)("strong",{children:"Sample ID"})," (e.g., TCGA-OR-ABLL), ",(0,r.jsx)("strong",{children:"Disease Type"})," (e.g., Adenomas and Adenocarcinoma), ",(0,r.jsx)("strong",{children:"Primary Site"})," (e.g., adrenal gland), ",(0,r.jsx)("strong",{children:"Tumor Stage"})," and ",(0,r.jsx)("strong",{children:"Tumor Grade"})," (often not reported), ",(0,r.jsx)("strong",{children:"Ethnicity"}),"(e.g., Hispanic or Latino, or not reported), ",(0,r.jsx)("strong",{children:"Race"})," (e.g., White), ",(0,r.jsx)("strong",{children:"Gender"})," (e.g., male or female), ",(0,r.jsx)("strong",{children:"Age"}),"(e.g., 75 years), ",(0,r.jsx)("strong",{children:"PFS"}),"(progression-free survival, often not reported), ",(0,r.jsx)("strong",{children:"Days to Death"})," (e.g., 1613 days), ",(0,r.jsx)("strong",{children:"PFS Status"})," (e.g., 0), and",(0,r.jsx)("strong",{children:"Vital Status"}),"(e.g., 1 for deceased). The list supports pagination (10 samples per page) with navigation controls, allowing users to filter and explore the 92 samples in this dataset, facilitating in-depth analysis of patient-specific CNA profiles and clinical outcomes."]}),(0,r.jsx)(eR.Z,{src:"/tutorial/SampleListPanel.gif",alt:"SampleListPanel.gif"})]})},{})},{title:"Step 3: Select Workflow",content:(0,r.jsx)(e=>{let{}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eG,{level:4,style:{margin:0,marginBottom:"8px",fontSize:"32px"},children:"Select Workflow"}),(0,r.jsxs)(eE,{style:{fontSize:"20px"},children:["The ",(0,r.jsx)("strong",{children:"Workflow Selector"})," lets you choose a workflow from the available options. Once a workflow is selected, you can view detailed visualizations specific to that workflow."]}),(0,r.jsx)(eR.Z,{src:"/tutorial/WorkflowSelector.png",alt:"WorkflowSelector.png"})]})},{})},{title:"Step 4: Explore Bin-Level CNA Heatmap",content:(0,r.jsx)(e=>{let{}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eG,{level:4,style:{margin:0,marginBottom:"8px",fontSize:"32px"},children:"Bin-Level CNA Heatmap"}),(0,r.jsx)(eE,{style:{fontSize:"20px"},children:(0,r.jsx)("strong",{children:"A CNA heatmap with samples as rows and chromosome-level genomic regions as columns, equied with zoomable cut-dendrogram and case meta annotation"})}),(0,r.jsx)(eE,{style:{fontSize:"20px"},children:"Over the past two decades, CNA heatmap has often been adopted to visualize the CNA profiles of a batch of samples in various sequencing protocols. e.g. bulk SNP array, whole genome/exon sequencing. CNA heatmap aids the landscape view of single case copy number in several pieces of literature. It is essential to reduce the size of heatmap while retaining the heterogeneity among cases. Cluster zoom-in operation is achieved by clicking the node in the dendrogram."}),(0,r.jsx)(eE,{style:{fontSize:"20px"},children:"Here, we build viz interface ''CNA Heatmap'' for interactive and real-time visualization of CNA landscape of a cancer project with zoomable dendrogram. With cases as rows and chromosome-level genomic regions as columns, the CNA heatmap exhibits the copy number of a specific case across the entire genome. The clinical meta heatmap is displayed on the left. A zoomable cut dendrogram is displayed on the left. If the mouse hovers over case CNA/meta heatmap, cutted dendrogram, and stairstep, an interactive tooltip carried its vital information will appear."}),(0,r.jsx)(eR.Z,{src:"/tutorial/BinLevelCNAHeatmap.gif",alt:"BinLevelCNAHeatmap.gif"})]})},{})},{title:"Step 5: Explore Gene-Level CNA Heatmap",content:(0,r.jsx)(e=>{let{}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eG,{level:4,style:{margin:0,marginBottom:"8px",fontSize:"32px"},children:"Gene-Level CNA Heatmap"}),(0,r.jsx)(eE,{style:{fontSize:"20px"},children:"To generate a gene-level heatmap in CNAScope, begin by clicking the Select button to choose the gene(s) of interest from the available options, such as those listed in the gene selection interface (e.g., genes associated with the TCGA-ACC dataset). Once the desired genes are selected, click the Render button to process the data and visualize the results. This action triggers the rendering of a gene-level heatmap, displaying the copy number aberration (CNA) profiles across samples or cells, with rows representing observations and columns corresponding to the selected genes. The heatmap, enhanced with color gradients and interactive features, allows users to explore CNA patterns and heterogeneity effectively, as illustrated in the visualization panels."}),(0,r.jsx)(eR.Z,{src:"/tutorial/GeneLevelCNAHeatmap.gif",alt:"GeneLevelCNAHeatmap.gif"})]})},{})},{title:"Step 6: Explore Term-Level CNA Heatmap",content:(0,r.jsx)(e=>{let{}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eG,{level:4,style:{margin:0,marginBottom:"8px",fontSize:"32px"},children:"Term-Level CNA Heatmap"}),(0,r.jsx)(eE,{style:{fontSize:"20px"},children:"To create a term-level heatmap in CNAScope, start by clicking the Select button to choose the terms of interest, such as pathways or functional annotations (e.g., from MSigDB or KEGG) relevant to the dataset like TCGA-ACC, mirroring the gene selection process. After selecting the desired terms, click the Render button to generate the heatmap, which visualizes copy number aberration (CNA) profiles across samples or cells, with rows representing observations and columns corresponding to the selected terms, offering insights into pathway-level genomic alterations similar to the gene-level view."}),(0,r.jsx)(eR.Z,{src:"/tutorial/TermLevelCNAHeatmap.gif",alt:"TermLevelCNAHeatmap.gif"})]})},{})},{title:"Step 7: Explore CNA Phylogenetic Tree",content:(0,r.jsx)(e=>{let{}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eG,{level:4,style:{margin:0,marginBottom:"8px",fontSize:"32px"},children:"CNA Phylogenetic Tree"}),(0,r.jsx)(eE,{style:{fontSize:"20px"},children:"The CNA Phylogenetic Tree in CNAScope visually represents the evolutionary relationships among samples or cells within a dataset, such as TCGA-ACC, based on their copy number aberration (CNA) profiles. Rendered with a branching structure, the tree displays nodes corresponding to individual observations (e.g., samples or cells) and branches indicating their phylogenetic divergence, with branch lengths reflecting the degree of CNA differences."}),(0,r.jsx)(eR.Z,{src:"/tutorial/CNAPhylogeneticTree.png",alt:"CNAPhylogeneticTree.png"})]})},{})},{title:"Step 8: Explore CNA Embedding Map",content:(0,r.jsx)(e=>{let{}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eG,{level:4,style:{margin:0,marginBottom:"8px",fontSize:"32px"},children:"CNA Embedding Map"}),(0,r.jsx)(eE,{style:{fontSize:"20px"},children:"The CNA Embedding Map in CNAScope offers a powerful visualization of cancer copy number aberration (CNA) profiles, leveraging dimensionality reduction techniques such as UMAP, TSNE, and PCA to project the high-dimensional CNA data from datasets like TCGA-ACC into a two-dimensional space."}),(0,r.jsx)(eR.Z,{src:"/tutorial/CNAEmbeddingMap.gif",alt:"CNAEmbeddingMap.gif"})]})},{})},{title:"Step 9: Explore CNA Ploidy Stairstep",content:(0,r.jsx)(e=>{let{}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eG,{level:4,style:{margin:0,marginBottom:"8px",fontSize:"32px"},children:"CNA Ploidy Stairstep"}),(0,r.jsx)(eE,{style:{fontSize:"20px"},children:'The CNA ploidy distribution can intuitively show tumor heterogeneity. The ploidy line plot along the chromosomes can also visually show the heterogeneity between tumor sample groups by combining genomic coordinates. By collapsing the cases in the same tumor sample groups into one observation, we can infer the pseudo-bulk ploidy of each sample group. Since cancer CNA ploidy line alters along chromosomes, we call it the "stairstep plot".'}),(0,r.jsx)(eR.Z,{src:"/tutorial/CNAPloidyStairstep.gif",alt:"CNAPloidyStairstep.gif"})]})},{})},{title:"Step 10: Explore CNA Ploidy Distribution",content:(0,r.jsx)(e=>{let{}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eG,{level:4,style:{margin:0,marginBottom:"8px",fontSize:"32px"},children:"CNA Ploidy Distribution"}),(0,r.jsx)(eE,{style:{fontSize:"20px"},children:"The CNA Ploidy Distribution visualization in CNAScope provides a detailed representation of the ploidy levels (total DNA content) across samples or cells within a dataset, such as TCGA-ACC, reflecting the genomic instability characteristic of cancer."}),(0,r.jsx)(eR.Z,{src:"/tutorial/CNAPloidyDistribution.png",alt:"CNAPloidyDistribution.png"})]})},{})},{title:"Step 11: Focal CNA & Gene",content:(0,r.jsx)(e=>{let{}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eG,{level:4,style:{margin:0,marginBottom:"8px",fontSize:"32px"},children:"Focal CNA & Gene"}),(0,r.jsx)(eE,{style:{fontSize:"20px"},children:'"Focal CNA & Gene" displays the GISTIC G-score stairsteps of all samples. The red regions indicate significant amplification, while the blue regions represent significant deletion.'}),(0,r.jsx)(eR.Z,{src:"/tutorial/CNAFocal.gif",alt:"CNAFocal.gif"})]})},{})}];var eV=e=>{let{}=e,{hasSeenTutorial:t,setHasSeenTutorial:n}=eP(e=>e),[a,l]=(0,E.useState)(0),[o,i]=(0,E.useState)(""),[s,c]=(0,E.useState)(!1),d=(0,E.useCallback)(e=>{i(eW[e].content)},[]),p=()=>{l(0),i(""),n(),c(!1)};return(0,E.useEffect)(()=>{s&&d(0)},[d,s]),(0,E.useEffect)(()=>{t||c(!0)},[t]),(0,r.jsx)(eD.Z,{title:(0,r.jsx)(eG,{level:2,style:{margin:0,marginTop:"8px"},children:"Genome Detail Tutorial"}),open:s,onCancel:p,footer:[a>0&&(0,r.jsx)(m.ZP,{onClick:()=>{a>0&&(l(a-1),d(a-1))},children:"Previous Step"},"prev"),a<eW.length-1?(0,r.jsx)(m.ZP,{type:"primary",onClick:()=>{a<eW.length-1&&(l(a+1),d(a+1))},children:"Next Step"},"next"):(0,r.jsx)(m.ZP,{type:"primary",onClick:p,children:"Got it!"},"gotit")],width:"80%",centered:!0,children:(0,r.jsxs)(H.Z,{container:!0,sx:{py:"12px"},children:[(0,r.jsx)(H.Z,{item:!0,size:2.5,children:(0,r.jsx)(eM.Z,{progressDot:!0,current:a,onChange:e=>{l(e),d(e)},direction:"vertical",items:eW.map(e=>({title:e.title}))})}),(0,r.jsx)(H.Z,{item:!0,size:9,offset:.5,children:(0,r.jsx)(g.Z,{sx:{height:"75vh",maxHeight:"75vh",overflow:"auto"},children:o})})]})})},eO=n(3750),eH=n(2755),eK=n(2904),eY=n(4953),eX=n(3870),eq=n(6163),eU=n(3594),e$=n(6413);let eJ=e=>{let{genes:t,terms:n,colorOptions:a,handleColorOptionsChange:l,onRender:o,resetRenderData:i,showModal:s}=e,[c,d]=(0,E.useState)(""),[p,x]=(0,E.useState)("");(0,E.useEffect)(()=>{a.gene&&d(a.gene)},[a.gene]),(0,E.useEffect)(()=>{a.term&&x(a.term)},[a.term]);let u={cluster:(0,r.jsx)(e$.Ir,{colorOptions:a,handleColorOptionsChange:l}),gene:(0,r.jsx)(e$.fJ,{genes:t,geneValue:c,onGeneValueChange:e=>{d(e)},handleColorOptionsChange:l}),term:(0,r.jsx)(e$.Hl,{terms:n,termValue:p,onTermValueChange:e=>{x(e)},handleColorOptionsChange:l})};return(0,r.jsxs)(h.Z,{spacing:3,children:[(0,r.jsxs)(h.Z,{spacing:1,children:[(0,r.jsx)(g.Z,{sx:{fontWeight:500},children:"Color By:"}),(0,r.jsx)(V.default,{value:a.colorBy,onChange:e=>l("colorBy",e),options:e$.yB,style:{width:"240px"},size:"large"}),u[a.colorBy]]}),(0,r.jsxs)(h.Z,{spacing:1,sx:{mt:3,mb:2},children:[(0,r.jsx)(e$.d0,{onRender:o,resetRenderData:i}),"cluster"===a.colorBy?(0,r.jsx)(m.ZP,{style:{backgroundColor:"#41B3A2",color:"#FFFFFF",borderColor:"#41B3A2"},onClick:s,children:"View Cluster Info"}):(0,r.jsx)(r.Fragment,{})]})]})},eQ=e=>{let{config:t,configKey:n,handleConfigChange:a}=e;return(0,r.jsxs)(h.Z,{spacing:2,children:[(0,r.jsx)(eU.e,{title:"Margin:",config:t,configKey:n,configSubKey:"margin",handleConfigChange:a}),(0,r.jsx)(eU.e,{title:"Axis Width:",config:t,configKey:n,configSubKey:"axisWidth",handleConfigChange:a})]})},e0=e=>{let{config:t,configKey:n,handleConfigChange:a}=e;return(0,r.jsx)(eU.e,{title:"Radius:",config:t,configKey:n,configSubKey:"radius",handleConfigChange:a})},e2=e=>{let{config:t,configKey:n,handleConfigChange:a}=e;return(0,r.jsxs)(h.Z,{spacing:2,children:[(0,r.jsx)(eU.e,{title:"Margin Top:",config:t,configKey:n,configSubKey:"marginTop",handleConfigChange:a}),(0,r.jsx)(eU.e,{title:"Margin Bottom:",config:t,configKey:n,configSubKey:"marginBottom",handleConfigChange:a}),(0,r.jsx)(eU.e,{title:"Font Size:",config:t,configKey:n,configSubKey:"fontSize",handleConfigChange:a})]})},e1=(e,t,n,a,l,o,i,s,c)=>[{key:"data",label:"Data Setting",extra:(0,r.jsx)(eX.Z,{}),children:(0,r.jsx)(eJ,{genes:e,terms:t,colorOptions:l,handleColorOptionsChange:o,onRender:i,resetRenderData:s,showModal:c})},{key:"chart",label:"Chart Setting",extra:(0,r.jsx)(eq.Z,{}),children:(0,r.jsx)(eQ,{config:n,configKey:"chart",handleConfigChange:a})},{key:"scatter",label:"Scatter Setting",extra:(0,r.jsx)(eq.Z,{}),children:(0,r.jsx)(e0,{config:n,configKey:"scatter",handleConfigChange:a})},{key:"title",label:"Title Setting",extra:(0,r.jsx)(eq.Z,{}),children:(0,r.jsx)(e2,{config:n,configKey:"title",handleConfigChange:a})}];var e4=e=>{let{genes:t,terms:n,colorOptions:a,handleColorOptionsChange:l,config:o,handleConfigChange:i,onRender:s,resetRenderData:c,showModal:d}=e,[p,x]=(0,E.useState)(["data","chart"]),h=(0,E.useMemo)(()=>e1(t,n,o,i,a,l,s,c,d),[t,n,o,i,a,l,s,c,d]);return(0,r.jsxs)(g.Z,{sx:{paddingLeft:"12px",paddingTop:"12px",height:"920px",maxHeight:"920px"},children:[(0,r.jsx)(eK.ZP,{theme:{components:{Collapse:{headerBg:"#FFFFFF",fontSize:"16px",headerPadding:"16px 16px"}}},children:(0,r.jsx)(eY.Z,{items:h,activeKey:p,onChange:e=>{x(e)},size:"middle"})}),(0,r.jsx)(g.Z,{sx:{paddingTop:"12px"}})]})},e6=n(9792),e3=n(9040),e9=n(3935),e5=n(5420),e8=n(8557);let e7=(0,E.forwardRef)((e,t)=>{let{cluster:n,meta:a,extents:l,config:o}=e,i=(0,E.useRef)(null),s=(0,E.useRef)(null),c=(0,E.useRef)(null),d=(0,E.useRef)(null),p=(0,E.useRef)(null),x=(0,E.useRef)(null),g="n_spatial",{svgWidth:u,svgHeight:m,innerWidth:f,figureSize:j,rowLegendNum:v,xOffsetScatterPlot:y,yOffsetScatterPlot:C,yOffsetXAxis:w,xOffsetLegend:S,yOffsetLegend:Z,xRange:_,yRange:b,colorScale:z}=(0,eu.jU)(920,n,o),N=(0,eu.$R)(g,l),{x:A,y:k}=(0,eu.yX)(N,_,b);return(0,E.useEffect)(()=>{em.Ys(c.current).call(em.LLu(A))},[A]),(0,E.useEffect)(()=>{em.Ys(d.current).call(em.y4O(k))},[k]),(0,E.useEffect)(()=>{em.Ys(p.current).selectAll("g").data(Array.from({length:n},(e,t)=>t+1)).join("g").attr("class",e=>"cluster".concat(e)).each(function(e){em.Ys(this).selectAll("circle").data(a.filter(t=>t.cluster===e),e=>e.id).join("circle").attr("cx",e=>A(e["".concat(g,"1")])).attr("cy",e=>k(e["".concat(g,"2")])).attr("r",o.scatter.radius).attr("fill",z(e)).on("pointerenter pointermove",(e,t)=>tn(e,t.id,[t["".concat(g,"1")],t["".concat(g,"2")]],"rgba(30, 144, 255, 0.6)",s)).on("pointerleave",()=>tr(s))})},[n,z,o.scatter.radius,g,a,A,k]),(0,E.useEffect)(()=>{em.Ys(x.current).selectAll("g").data(Array.from({length:n},(e,t)=>t+1)).join("g").attr("transform",(e,t)=>"translate(".concat(Math.floor(t/v)*(o.legend.width+o.legend.itemHorizontalGap),", ").concat((o.legend.itemVerticalGap+o.legend.height)*(t%v),")")).each(function(e){let t=em.Ys(this);t.selectAll("rect").data([e]).join("rect").attr("y",2).attr("width",26).attr("height",16).attr("rx",4).attr("ry",4).attr("fill",z(e)),t.selectAll("text").data([e]).join("text").attr("x",30).attr("dy","1rem").text(e=>"Cluster ".concat(e)),t.selectAll(".legend-event-trigger").data([e]).join("rect").attr("class","legend-event-trigger").attr("width",o.legend.width).attr("height",o.legend.height).attr("fill","transparent").on("pointerenter pointermove",(e,t)=>te(t,p)).on("pointerleave",(e,t)=>tt(t,p))})},[n,z,o.legend.height,o.legend.itemHorizontalGap,o.legend.itemVerticalGap,o.legend.width,v]),(0,E.useImperativeHandle)(t,()=>({downloadSvg:()=>{i.current&&(0,e3.X)(i.current,"".concat(g.slice(2),"_Spatial_Map.svg"))}})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{sx:{alignItems:"center",overflowX:"auto"},children:(0,r.jsx)("svg",{ref:i,width:u,height:m,children:(0,r.jsxs)("g",{className:"plotContainer",transform:"translate(".concat(o.chart.margin,", ").concat(o.chart.margin,")"),children:[(0,r.jsx)("g",{className:"title",children:(0,r.jsx)("text",{fontSize:o.title.fontSize,transform:"translate(".concat(u/2,", ").concat(o.title.marginTop,")"),dy:"1em",textAnchor:"middle",fontWeight:500,children:"Spatial Map"})}),(0,r.jsx)("g",{ref:c,transform:"translate(".concat(y,", ").concat(w,")"),children:(0,r.jsxs)("text",{x:j/2,y:36,fontSize:14,fontWeight:"bold",fill:"black",textAnchor:"middle",children:[g.slice(2),"1"]})}),(0,r.jsx)("g",{ref:d,transform:"translate(".concat(y,", ").concat(C,")"),children:(0,r.jsxs)("text",{y:j/2+36,fontSize:14,fontWeight:"bold",fill:"black",textAnchor:"middle",transform:"rotate(90, 0, ".concat(j/2,")"),children:[g.slice(2),"2"]})}),(0,r.jsx)("g",{ref:p,transform:"translate(".concat(y,", ").concat(C,")")}),(0,r.jsx)("g",{ref:x,transform:"translate(".concat(S,", ").concat(Z,")")})]})})}),(0,e9.createPortal)((0,r.jsx)(e5.Z,{ref:s}),document.body)]})}),te=(e,t)=>{em.Ys(t.current).selectAll("g:not(.cluster".concat(e,")")).attr("opacity",.2)},tt=(e,t)=>{em.Ys(t.current).selectAll("g").attr("opacity",1)},tn=(e,t,n,r,a)=>{a.current.showTooltip(e,(0,e8.d)(t,n,r))},tr=e=>{e.current.hideTooltip()};e7.displayName="ClusterSpatialMapPanel";var ta=n(7028);let tl=(0,E.forwardRef)((e,t)=>{let{extents:n,meta:a,gene:l,genes:o,config:i,isLog:s}=e,c=(0,E.useRef)(null),d=(0,E.useRef)(null),p=(0,E.useRef)(null),x=(0,E.useRef)(null),g=(0,E.useRef)(null),u="n_spatial";console.log(s);let{svgWidth:m,svgHeight:f,innerWidth:j,figureSize:v,subTitleMarginTop:y,xOffsetScatterPlot:C,yOffsetScatterPlot:w,yOffsetXAxis:S,xOffsetLegend:Z,yOffsetLegend:_,xRange:b,yRange:z,CNARange:N,CNAValueScale:A}=(0,eu.lY)(920,i,s),k=(0,eu.$R)(u,n),{x:L,y:T}=(0,eu.yX)(k,b,z);return(0,E.useEffect)(()=>{em.Ys(p.current).call(em.LLu(L))},[L]),(0,E.useEffect)(()=>{em.Ys(x.current).call(em.y4O(T))},[T]),(0,E.useEffect)(()=>{em.Ys(g.current).selectAll("circle").data(a,e=>e.id).join("circle").attr("cx",e=>L(e["".concat(u,"1")])).attr("cy",e=>T(e["".concat(u,"2")])).attr("r",i.scatter.radius).attr("fill",e=>A(o[e.id])).on("pointerenter pointermove",(e,t)=>to(e,t.id,[t["".concat(u,"1")],t["".concat(u,"2")]],o[t.id],d)).on("pointerleave",()=>ti(d))},[A,i.scatter.radius,u,o,a,L,T]),(0,E.useImperativeHandle)(t,()=>({downloadSvg:()=>{c.current&&(0,e3.X)(c.current,"".concat(u.slice(2),"_Embedding_Map.svg"))}})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{sx:{alignItems:"center",overflowX:"auto"},children:(0,r.jsx)("svg",{ref:c,width:m,height:f,children:(0,r.jsxs)("g",{className:"plotContainer",transform:"translate(".concat(i.chart.margin,", ").concat(i.chart.margin,")"),children:[(0,r.jsxs)("g",{className:"title",children:[(0,r.jsx)("text",{fontSize:i.title.fontSize,transform:"translate(".concat(m/2,", ").concat(i.title.marginTop,")"),dy:"1em",textAnchor:"middle",fontWeight:500,children:"Spatial Map"}),(0,r.jsxs)("text",{fontSize:i.title.subFontSize,transform:"translate(".concat(m/2,", ").concat(y,")"),dy:"1em",textAnchor:"middle",fontWeight:500,fill:"#B0B0B0",children:["Color By: Gene (",l,")"]})]}),(0,r.jsx)("g",{ref:p,transform:"translate(".concat(C,", ").concat(S,")"),children:(0,r.jsxs)("text",{x:v/2,y:36,fontSize:14,fontWeight:"bold",fill:"black",textAnchor:"middle",children:[u.slice(2),"1"]})}),(0,r.jsx)("g",{ref:x,transform:"translate(".concat(C,", ").concat(w,")"),children:(0,r.jsxs)("text",{y:v/2+36,fontSize:14,fontWeight:"bold",fill:"black",textAnchor:"middle",transform:"rotate(90, 0, ".concat(v/2,")"),children:[u.slice(2),"2"]})}),(0,r.jsx)("g",{ref:g,transform:"translate(".concat(C,", ").concat(w,")")}),(0,r.jsx)("g",{transform:"translate(".concat(Z,", ").concat(_,")"),children:(0,r.jsx)(ta.r,{color:A,title:"CNV Value",height:320,width:40,legendMarginTop:0,ticks:N[2]-N[0]+1})})]})})}),(0,e9.createPortal)((0,r.jsx)(e5.Z,{ref:d}),document.body)]})}),to=(e,t,n,r,a)=>{a.current.showTooltip(e,(0,e8.C)(t,n,r))},ti=e=>{e.current.hideTooltip()};tl.displayName="GeneSpatialMapPanel";let ts=(0,E.forwardRef)((e,t)=>{let{extents:n,meta:a,term:l,terms:o,config:i,isLog:s}=e,c=(0,E.useRef)(null),d=(0,E.useRef)(null),p=(0,E.useRef)(null),x=(0,E.useRef)(null),g=(0,E.useRef)(null),u="n_spatial",{svgWidth:m,svgHeight:f,innerWidth:j,figureSize:v,subTitleMarginTop:y,xOffsetScatterPlot:C,yOffsetScatterPlot:w,yOffsetXAxis:S,xOffsetLegend:Z,yOffsetLegend:_,xRange:b,yRange:z,CNARange:N,CNAValueScale:A}=(0,eu.lY)(920,i,s),k=(0,eu.$R)(u,n),{x:L,y:T}=(0,eu.yX)(k,b,z);return(0,E.useEffect)(()=>{em.Ys(p.current).call(em.LLu(L))},[L]),(0,E.useEffect)(()=>{em.Ys(x.current).call(em.y4O(T))},[T]),(0,E.useEffect)(()=>{em.Ys(g.current).selectAll("circle").data(a,e=>e.id).join("circle").attr("cx",e=>L(e["".concat(u,"1")])).attr("cy",e=>T(e["".concat(u,"2")])).attr("r",i.scatter.radius).attr("fill",e=>A(o[e.id])).on("pointerenter pointermove",(e,t)=>tc(e,t.id,[t["".concat(u,"1")],t["".concat(u,"2")]],o[t.id],d)).on("pointerleave",()=>td(d))},[A,i.scatter.radius,u,o,a,L,T]),(0,E.useImperativeHandle)(t,()=>({downloadSvg:()=>{c.current&&(0,e3.X)(c.current,"".concat(u.slice(2),"_Embedding_Map.svg"))}})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{sx:{alignItems:"center",overflowX:"auto"},children:(0,r.jsx)("svg",{ref:c,width:m,height:f,children:(0,r.jsxs)("g",{className:"plotContainer",transform:"translate(".concat(i.chart.margin,", ").concat(i.chart.margin,")"),children:[(0,r.jsxs)("g",{className:"title",children:[(0,r.jsx)("text",{fontSize:i.title.fontSize,transform:"translate(".concat(m/2,", ").concat(i.title.marginTop,")"),dy:"1em",textAnchor:"middle",fontWeight:500,children:"Spatial Map"}),(0,r.jsxs)("text",{fontSize:i.title.subFontSize,transform:"translate(".concat(m/2,", ").concat(y,")"),dy:"1em",textAnchor:"middle",fontWeight:500,fill:"#B0B0B0",children:["Color By: Term (",l,")"]})]}),(0,r.jsx)("g",{ref:p,transform:"translate(".concat(C,", ").concat(S,")"),children:(0,r.jsxs)("text",{x:v/2,y:36,fontSize:14,fontWeight:"bold",fill:"black",textAnchor:"middle",children:[u.slice(2),"1"]})}),(0,r.jsx)("g",{ref:x,transform:"translate(".concat(C,", ").concat(w,")"),children:(0,r.jsxs)("text",{y:v/2+36,fontSize:14,fontWeight:"bold",fill:"black",textAnchor:"middle",transform:"rotate(90, 0, ".concat(v/2,")"),children:[u.slice(2),"2"]})}),(0,r.jsx)("g",{ref:g,transform:"translate(".concat(C,", ").concat(w,")")}),(0,r.jsx)("g",{transform:"translate(".concat(Z,", ").concat(_,")"),children:(0,r.jsx)(ta.r,{color:A,title:"CNV Value",height:320,width:40,legendMarginTop:0,ticks:N[2]-N[0]+1})})]})})}),(0,e9.createPortal)((0,r.jsx)(e5.Z,{ref:d}),document.body)]})}),tc=(e,t,n,r,a)=>{a.current.showTooltip(e,(0,e8.C)(t,n,r))},td=e=>{e.current.hideTooltip()};ts.displayName="TermSpatialMapPanel";let tp=e=>{let{renderData:t,extents:n,config:a,vizRef:l}=e;return(0,r.jsx)(r.Fragment,{children:Array.isArray(null==t?void 0:t.processedMeta)&&(null==t?void 0:t.processedMeta.length)===0?(0,r.jsx)(g.Z,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(g.Z,{sx:{fontWeight:500,fontSize:"28px"},children:"Number of samples is less than the number of clusters."})}):(0,r.jsx)(e7,{cluster:null==t?void 0:t.cluster,meta:null==t?void 0:t.processedMeta,extents:n,config:a,ref:l})})},tx=e=>{let{renderData:t,extents:n,config:a,processing:l,isShowLeft:o,handleIsShowLeftChange:i,isLog:s,vizRef:d}=e,p={cluster:(0,r.jsx)(tp,{renderData:t,extents:n,config:a,isShowLeft:o,handleIsShowLeftChange:i,vizRef:d}),gene:(0,r.jsx)(tl,{meta:null==t?void 0:t.processedMeta,gene:null==t?void 0:t.gene,genes:null==t?void 0:t.geneVector,extents:n,config:a,isLog:s,ref:d}),term:(0,r.jsx)(ts,{meta:null==t?void 0:t.processedMeta,term:null==t?void 0:t.term,terms:null==t?void 0:t.termVector,extents:n,config:a,isLog:s,ref:d})};return(0,r.jsxs)(g.Z,{sx:{position:"relative",height:"920px"},children:[(0,r.jsx)(g.Z,{sx:{position:"absolute",top:"14px",left:"4px"},children:(0,r.jsx)(e6.Z,{isShowLeft:o,handleIsShowLeftChange:i,title:"Setting Options"})}),l?(0,r.jsx)(c.Z,{containerSx:{height:"910px"},loadingPrompt:"Processing Data..., please wait for a moment."}):null===t?(0,r.jsx)(g.Z,{sx:{width:"100%",height:"100%",padding:"0px 60px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(g.Z,{sx:{fontWeight:500,fontSize:"28px",textAlign:"center"},children:"Use the Data Setting panel to configure the embedding method and coloring strategy. Click Render to generate the visualization based on your selections."})}):p[t.type]]})};var th=e=>{let{meta:t,extents:n,newick:a,genes:l,terms:o,dataset:i,geneVectorFetcher:s,termVectorFetcher:c,isLog:d,vizRef:p}=e,[x,h]=(0,E.useState)({colorBy:"cluster",cluster:5,gene:l[0].value,term:o[0].value}),[g,u]=(0,E.useState)(null),[m,f]=(0,E.useState)(!0),[j,v]=(0,E.useState)(!1),[y,C]=(0,E.useState)(!1),[w,S]=(0,E.useState)({chart:{margin:30,axisWidth:50},scatter:{radius:4},title:{marginTop:20,marginBottom:20,fontSize:24,subFontSize:16},legend:{width:120,height:25,itemVerticalGap:5,itemHorizontalGap:5,marginLeft:30}}),Z=(0,E.useMemo)(()=>(0,eu.fP)(t,a,x.cluster),[x.cluster,t,a]),_=async()=>{C(!0);try{if("cluster"===x.colorBy)u({type:"cluster",cluster:x.cluster,processedMeta:Z}),await new Promise(requestAnimationFrame);else if("gene"===x.colorBy){let e=await s(x.gene),t=em.ueB(e.data,em.rA8).reduce((e,t)=>{let{id:n,...r}=t;return e[n]=Object.values(r)[0],e},{});u({type:"gene",gene:x.gene,processedMeta:Z,geneVector:t})}else if("term"===x.colorBy){let e=await c(x.term),t=em.ueB(e.data,em.rA8).reduce((e,t)=>{let{id:n,...r}=t;return e[n]=Object.values(r)[0],e},{});u({type:"term",term:x.term,processedMeta:Z,termVector:t})}else u(null)}catch(e){console.error(e)}finally{C(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eO.Z,{isShowLeft:m,leftPanelWidth:300,leftPanel:(0,r.jsx)(e4,{genes:l,terms:o,colorOptions:x,handleColorOptionsChange:(e,t)=>{h(n=>({...n,[e]:t}))},config:w,handleConfigChange:(e,t,n)=>{S(r=>({...r,[e]:{...r[e],[t]:n}}))},onRender:_,resetRenderData:()=>{u(null)},showModal:()=>{v(!0)}}),rightPanel:(0,r.jsx)(tx,{renderData:g,extents:n,config:w,processing:y,isShowLeft:m,handleIsShowLeftChange:()=>{f(!m)},isLog:d,vizRef:p})}),(0,r.jsx)(eH.Z,{dataset:i,cluster:x.cluster,meta:Z,isModalOpen:j,handleModalCancel:()=>{v(!1)}})]})};let tg=e=>{let{selectedWorkflow:t,dataset:n,vizRef:a,binSize:l}=e,{meta:i,isMetaLoading:s,isMetaError:p}=(0,J.g)(n.name,t,l),{newick:x,isNewickLoading:h,isNewickError:g}=(0,eo.I)(n.name,t,l),{genes:u,isGenesLoading:m,isGenesError:f}=(0,el.O)(n.name,t,l),{terms:j,isTermsLoading:v,isTermsError:y}=(0,ep.y)(n.name,t,l),{parsedMeta:C,extents:w}=(0,E.useMemo)(()=>i?(0,eu.Rr)(i):{parsedMeta:[],embeddingMethods:[],extents:{}},[i]),S=(0,E.useMemo)(()=>u?u.map(e=>({value:e.gene})):[],[u]),Z=(0,E.useMemo)(()=>j?j.map(e=>({value:e.gene})):[],[j]),_="Gene Log"===n.cn_type||"Bin Log"===n.cn_type;return s||h||m||v?(0,r.jsx)(c.Z,{height:"920px"}):p||g||f||y?(0,r.jsx)(d.Z,{height:"920px"}):(0,r.jsx)(th,{meta:C,extents:w,newick:x,genes:S,terms:Z,dataset:n,geneVectorFetcher:e=>ei.Z.post((0,o.h8)(),{datasetName:n.name,workflowType:t,binSize:l,genes:[e]}),termVectorFetcher:e=>ei.Z.post((0,o.l4)(),{datasetName:n.name,workflowType:t,binSize:l,terms:[e]}),isLog:_,vizRef:a})};var tu=e=>{let{selectedWorkflow:t,dataset:n,binSize:a}=e,l=(0,E.useRef)(null);return(0,r.jsxs)(h.Z,{spacing:4,children:[(0,r.jsxs)(h.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,r.jsxs)(g.Z,{component:"h6",sx:{fontSize:"36px"},children:["CNA Spatial Map(",(0,r.jsx)(en.Z,{CNType:n.cn_type,iconStyle:{fontSize:"24px"}}),")"]}),(0,r.jsx)(h.Z,{direction:"row",spacing:2,children:(0,r.jsx)(m.ZP,{type:"primary",onClick:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,r.jsx)(et.Z,{}),children:"Download SVG Chart"})})]}),(0,r.jsx)($.Z,{children:(0,r.jsx)(tg,{dataset:n,selectedWorkflow:t,vizRef:l,binSize:a})})]})};let tm=e=>{let{data:t,error:n,isLoading:r,mutate:a}=(0,l.ZP)((0,o.Ok)(e),i._);return{consensusFocalGene:t,isConsensusFocalGeneLoading:r,isConsensusFocalGeneError:n,mutate:a}},tf=[{label:"AMP",value:"AMP"},{label:"DEL",value:"DEL"}],tj=e=>{let{alterationType:t,handleAlterationTypeChange:n,showModal:a}=e;return(0,r.jsxs)(h.Z,{spacing:3,children:[(0,r.jsxs)(h.Z,{spacing:1,children:[(0,r.jsx)(g.Z,{sx:{fontWeight:500},children:"Alteration Type:"}),(0,r.jsx)(V.default,{value:t,onChange:n,options:tf,style:{width:"240px"},size:"large"})]}),(0,r.jsx)(m.ZP,{style:{backgroundColor:"#41B3A2",color:"#FFFFFF",borderColor:"#41B3A2"},onClick:a,children:"Show Unavailable Intersections"})]})},tv=(e,t,n)=>[{key:"data",label:"Data Setting",extra:(0,r.jsx)(eX.Z,{}),children:(0,r.jsx)(tj,{alterationType:e,handleAlterationTypeChange:t,showModal:n})}];var ty=e=>{let{alterationType:t,handleAlterationTypeChange:n,showModal:a}=e,[l,o]=(0,E.useState)(["data"]),i=(0,E.useMemo)(()=>tv(t,n,a),[t,n]);return(0,r.jsxs)(g.Z,{sx:{paddingLeft:"12px",paddingTop:"12px",height:"920px",maxHeight:"920px"},children:[(0,r.jsx)(eK.ZP,{theme:{components:{Collapse:{headerBg:"#FFFFFF",fontSize:"16px",headerPadding:"16px 16px"}}},children:(0,r.jsx)(eY.Z,{items:i,activeKey:l,onChange:e=>{o(e)},size:"middle"})}),(0,r.jsx)(g.Z,{sx:{paddingTop:"12px"}})]})};let tC={AS:"Allele-specific Copy Number Segment",CNS:"Copy Number Segment",MCNS:"Masked Copy Number Segment"},tw={ascat2:"ASCAT2",ascat3:"ASCAT3",ascatNGS:"AscatNGS",DNAcopy:"DNAcopy",GATK4_CNV:"GATK4 CNV"},tS=(e,t)=>{let n=e[t],r=Object.keys(n),a=[];r.forEach((e,t)=>{let[r,l]=e.split(" "),o=tC[r]||r,i=tw[l]||l,s="".concat(o,"--").concat(i);a.push({sets:[t],label:s,index:t,size:n[e].length})});let l=[];for(let e=2;e<=r.length;e++)(function(e,t){let n=[];return!function r(a,l){if(l.length===t){n.push(l);return}for(let t=a;t<e.length;t++)r(t+1,[...l,e[t]])}(0,[]),n})(r,e).forEach(e=>{let t=function(e,t){return e.map(e=>t[e]).reduce((e,t)=>e.filter(e=>t.includes(e)))}(e,n);t.length>0&&l.push({sets:e.map(e=>r.indexOf(e)),size:t.length})});return[...a,...l]};var tZ=n(6112),t_=n(3296),tb=n(6486);let tz=(e,t,n)=>{let r=[];if(e.length>0){let a=tZ.venn(e,{lossFunction:tZ.lossFunction});a=tZ.normalizeSolution(a,Math.PI/2,null),function(e,t,n){let r={},a=function(e){let t={},n=[];for(let r in e)n.push(r),t[r]=[];for(let r=0;r<n.length;r++){let a=e[n[r]];for(let l=r+1;l<n.length;++l){let o=e[n[l]],i=tZ.distance(a,o);i+o.radius<=a.radius+1e-10?t[n[l]].push(n[r]):i+a.radius<=o.radius+1e-10&&t[n[r]].push(n[l])}}return t}(e);for(let l=0;l<t.length;++l){let o=t[l].sets,i={},s={};for(let e=0;e<o.length;++e){i[o[e]]=!0;let t=a[o[e]];for(let e=0;e<t.length;++e)s[t[e]]=!0}let c=[],d=[];for(let t in e)t in i?c.push(e[t]):t in s||d.push(e[t]);let p=tZ.computeTextCentre(c,d);r[o]=p,p.disjoint&&t[l].size>0&&n.push(o)}}(tZ.scaleSolution(a,t,n,15),e,r)}return r};var tN=e=>{let{sets:t,svgWidth:n,svgHeight:a}=e,l=(0,E.useRef)(null);return(0,E.useEffect)(()=>{let e=em.Ys(l.current);e.datum(t).call(tZ.VennDiagram().width(n).height(a)),e.selectAll("text").style("pointer-event","none").style("cursor","default");let r=em.Ys("body").append("div").attr("class","venntooltip");e.selectAll("g").on("mouseover",function(t,n){tZ.sortAreas(e,n),r.transition().duration(400).style("opacity",.9),r.text(n.size+" genes"),em.Ys(this).select("path").style("stroke","white").style("stroke-width",5).style("fill-opacity",1===n.sets.length?.4:.1).style("stroke-opacity",1)}).on("mousemove",function(e){r.style("left",e.pageX+"px").style("top",e.pageY-28+"px")}).on("mouseout",function(e,t){r.transition().duration(400).style("opacity",0),em.Ys(this).transition("tooltip").duration(400).select("path").style("stroke-width",0).style("fill-opacity",1===t.sets.length?.25:0).style("stroke-opacity",0)})},[t,a,n]),(0,r.jsx)(g.Z,{ref:l})},tA=n(5417),tk=n(7307);let tL=[{title:"Intersection",dataIndex:"sets",align:"center",render:e=>(0,r.jsx)(h.Z,{direction:"row",spacing:1,children:e.map((e,t)=>(0,r.jsx)(j.Z,{value:e,color:"purple"},t))})},{title:"Size",dataIndex:"size",align:"center",fixed:"right",width:200}],tT=(e,t)=>{if(!e)return null;let n=t.filter(t=>e.some(e=>e.every(e=>t.sets.includes(e)))),r=t.filter(e=>1===e.sets.length).reduce((e,t)=>{let{index:n,label:r}=t;return e[n]=r,e},{});return n.map(e=>{let t=e.sets.map(e=>r[e]||e);return{...e,sets:t}})},tI=e=>{let{}=e;return(0,r.jsx)(g.Z,{component:"span",sx:{fontSize:"16px"},children:"These intersections are too small to be represented on the diagram."})},tB=e=>{let{unRepresentedAreas:t,sets:n}=e,a=tT(t,n);return(0,r.jsxs)(h.Z,{spacing:2,children:[(0,r.jsx)(tk.Z,{message:(0,r.jsx)("strong",{children:"Notice:"}),description:(0,r.jsx)(tI,{}),type:"info",showIcon:!0}),(0,r.jsx)(T.k,{columns:tL,rowKey:e=>e.sets,dataSource:a,scroll:{x:"max-content"}})]})};var tF=e=>{let{unRepresentedAreas:t,sets:n,isModalOpen:a,handleModalCancel:l}=e;return(0,r.jsx)(tA.Z,{titleContent:(0,r.jsx)(g.Z,{sx:{fontWeight:"500",fontSize:"28px",pointerEvents:"none"},children:"Unavailable Intersections"}),open:a,onCancel:l,footer:[],width:1450,centered:!0,children:(0,r.jsx)(tB,{unRepresentedAreas:t,sets:n})})};let tP=e=>{let{sets:t,svgWidth:n,svgHeight:a,isShowLeft:l,handleIsShowLeftChange:o}=e;return(0,r.jsxs)(g.Z,{sx:{position:"relative",height:"920px"},children:[(0,r.jsx)(g.Z,{sx:{position:"absolute",top:"14px",left:"4px"},children:(0,r.jsx)(e6.Z,{isShowLeft:l,handleIsShowLeftChange:o,title:"Setting Options"})}),(0,r.jsx)(tN,{sets:t,svgWidth:n,svgHeight:a})]})};var tR=e=>{let{consensusFocalGene:t}=e,[n,a]=(0,E.useState)("AMP"),[l,o]=(0,E.useState)(!0),[i,s]=(0,E.useState)(!1),{width:c,height:d}=(0,t_.Oj)(),p=c-320,x=d-20,h=(0,E.useMemo)(()=>tS(t,n),[n,t]),g=(0,E.useMemo)(()=>tz(tb.cloneDeep(h),p,x),[h,x,p]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eO.Z,{isShowLeft:l,leftPanelWidth:300,leftPanel:(0,r.jsx)(ty,{alterationType:n,handleAlterationTypeChange:e=>{a(e)},showModal:()=>{s(!0)}}),rightPanel:(0,r.jsx)(tP,{sets:h,svgWidth:p,svgHeight:x,isShowLeft:l,handleIsShowLeftChange:()=>{o(!l)}})}),(0,r.jsx)(tF,{unRepresentedAreas:g,sets:h,isModalOpen:i,handleModalCancel:()=>{s(!1)}})]})};let tD=e=>{let{dataset:t}=e,{consensusFocalGene:n,isConsensusFocalGeneLoading:a,isConsensusFocalGeneError:l}=tm(t.name);return a?(0,r.jsx)(c.Z,{height:"920px"}):l?(0,r.jsx)(d.Z,{height:"920px",children:(0,r.jsx)(g.Z,{sx:{width:"100%",height:"100%",padding:"0px 60px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(g.Z,{sx:{fontWeight:500,fontSize:"28px",textAlign:"center"},children:"This dataset is not suitable for Venn visualization of consensus focal genes."})})}):(0,r.jsx)(tR,{consensusFocalGene:n})};var tM=e=>{let{dataset:t}=e,n=(0,E.useRef)(null);return(0,r.jsxs)(h.Z,{spacing:4,children:[(0,r.jsxs)(h.Z,{direction:"row",spacing:6,alignItems:"center",sx:{borderBottom:"2px solid #e0e0e0",paddingBottom:"12px"},children:[(0,r.jsxs)(g.Z,{component:"h6",sx:{fontSize:"36px"},children:["Consensus Focal Gene Venn(",(0,r.jsx)(en.Z,{CNType:t.cn_type,iconStyle:{fontSize:"24px"}}),")"]}),(0,r.jsx)(h.Z,{direction:"row",spacing:2,children:(0,r.jsx)(m.ZP,{type:"primary",onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.downloadSvg()},size:"large",icon:(0,r.jsx)(et.Z,{}),children:"Download SVG Chart"})})]}),(0,r.jsx)($.Z,{children:(0,r.jsx)(tD,{dataset:t})})]})},tG=e=>{let{dataset:t}=e,[n,a]=(0,E.useState)(null),[l,o]=(0,E.useState)("5M"),{resetTutorialState:i}=eP();return(0,E.useEffect)(()=>{t.workflow?a(t.workflow.split(",")[0]):a("NA")},[t.workflow]),(0,r.jsxs)(h.Z,{spacing:4,sx:{pt:"12px",px:"32px"},children:[(0,r.jsx)(k,{dataset:t,resetTutorialState:i}),"bulkDNA"===t.modality?(0,r.jsx)(B,{dataset:t}):"scDNA"===t.modality?(0,r.jsx)(P,{dataset:t}):"scRNA"===t.modality?(0,r.jsx)(D,{dataset:t}):"ST"===t.modality?(0,r.jsx)(G,{dataset:t}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(q,{dataset:t,workflow:t.workflow,selectedWorkflow:n,handleSelectedWorkflowChange:e=>{a(e)},binSize:l,handleBinSizeChange:e=>{o(e)}}),n?(0,r.jsxs)(r.Fragment,{children:["Gene Integer"!==t.cn_type&&"Gene Log"!==t.cn_type?(0,r.jsx)(ea,{dataset:t,selectedWorkflow:n,binSize:l}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(ed,{dataset:t,selectedWorkflow:n,binSize:l}),(0,r.jsx)(eh,{dataset:t,selectedWorkflow:n,binSize:l}),(0,r.jsx)(eA,{dataset:t,selectedWorkflow:n,binSize:l}),(0,r.jsx)(ev,{dataset:t,selectedWorkflow:n,binSize:l}),"ST"===t.modality?(0,r.jsx)(tu,{selectedWorkflow:n,dataset:t,binSize:l}):(0,r.jsx)(r.Fragment,{}),"Gene Integer"!==t.cn_type&&"Gene Log"!==t.cn_type?(0,r.jsx)(ew,{dataset:t,selectedWorkflow:n,binSize:l}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(eI,{dataset:t,selectedWorkflow:n,binSize:l}),"GDC Portal"===t.source?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tM,{dataset:t}),(0,r.jsx)(eb,{dataset:t})]}):(0,r.jsx)(r.Fragment,{})]}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(g.Z,{}),(0,r.jsx)(eV,{})]})},tE=e=>{let{}=e,t=(0,a.useRouter)(),{datasetName:n}=t.query,{dataset:l,isLoading:o,isError:i}=s(n);return!t.isReady||o?(0,r.jsx)(c.Z,{containerSx:{height:"80vh",marginTop:"40px"}}):i?(0,r.jsx)(d.Z,{containerSx:{height:"80vh",marginTop:"40px"}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x(),{children:[(0,r.jsxs)("title",{children:[l.name," | CNAScope"]}),(0,r.jsx)("meta",{name:"description",content:"Details of dataset ".concat(l.name)})]}),(0,r.jsx)(tG,{dataset:l})]})}}},function(e){e.O(0,[662,920,944,943,816,441,927,530,721,41,141,4,61,112,513,622,461,888,774,179],function(){return e(e.s=7609)}),_N_E=e.O()}]);