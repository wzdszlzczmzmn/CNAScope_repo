(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{91992:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workflow",function(){return t(87322)}])},1226:function(e,l,t){"use strict";t.d(l,{$G:function(){return r},$N:function(){return y},BQ:function(){return j},DM:function(){return a},Dy:function(){return h},ED:function(){return m},EY:function(){return d},Ed:function(){return p},JO:function(){return x},Sz:function(){return v},UF:function(){return c},US:function(){return s},b5:function(){return g},d1:function(){return b},gR:function(){return i},jo:function(){return o},oi:function(){return f},te:function(){return u}});var n=t(35955);let i=()=>"".concat(n.l,"/submit_basic_annotation_task/"),a=()=>"".concat(n.l,"/submit_recurrent_cna_task/"),s=()=>"".concat(n.l,"/query_task/"),r=e=>"".concat(n.l,"/run_demo/?name=").concat(e),o=e=>"".concat(n.l,"/query_task/?taskUUID=").concat(e),c=e=>"".concat(n.l,"/CNA_matrix/?uuid=").concat(e),u=e=>"".concat(n.l,"/CNA_meta/?uuid=").concat(e),d=e=>"".concat(n.l,"/CNA_tree/?uuid=").concat(e),p=e=>"".concat(n.l,"/CNA_genes/?uuid=").concat(e),m=e=>"".concat(n.l,"/CNA_newick/?uuid=").concat(e),x=()=>"".concat(n.l,"/CNA_gene_matrix/"),h=e=>"".concat(n.l,"/CNA_terms/?uuid=").concat(e),b=()=>"".concat(n.l,"/CNA_term_matrix/"),f=e=>"".concat(n.l,"/ploidy_distribution/?uuid=").concat(e),j=e=>"".concat(n.l,"/focal_CNA_info/?uuid=").concat(e),y=e=>"".concat(n.l,"/download_task_data/?uuid=").concat(e),g=e=>"".concat(n.l,"/top_cn_variance/?uuid=").concat(encodeURIComponent(e)),v=()=>"".concat(n.l,"/CNA_vector/")},91499:function(e,l,t){"use strict";var n=t(87066),i=t(35955);let a=n.Z.create({baseURL:i.Sg,timeout:6e4,headers:{"Content-Type":"application/json"}});l.Z=a},35955:function(e,l,t){"use strict";t.d(l,{Sg:function(){return n},Vl:function(){return i},l:function(){return a}});let n="https://cna.fengslab.com/api",i=n+"/database",a=n+"/analysis"},87322:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return ec}});var n=t(85893),i=t(67294),a=t(13368),s=t(22904),r=t(28025),o=t(11163),c=t(69980),u=t(40530),d=t(2492),p=t(50247),m=t(70020),x=t(23721),h=t(7436),b=t(7489),f=t(38236),j=t(72635),y=t(58514),g=t(89073),v=t(22130),Z=t(87672),C=t(47464),k=t(13293),S=t(37228),w=t(92218),_=e=>{let{runDemoItems:l,viewResultItems:t,onHelp:i,isAnalysis:a}=e;return(0,n.jsxs)(j.Z,{children:[a?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Z,{menu:{items:l},placement:"bottom",children:(0,n.jsx)(y.ZP,{type:"primary",icon:(0,n.jsx)(C.Z,{}),children:"Run Demo"})}),(0,n.jsx)(v.Z,{menu:{items:t},placement:"bottom",children:(0,n.jsx)(y.ZP,{danger:!0,icon:(0,n.jsx)(k.Z,{}),children:"View Demo Result"})}),(0,n.jsx)(Z.Z,{type:"vertical",verticalAlign:"middle",style:{height:24}})]}),(0,n.jsx)(y.ZP,{type:"primary",icon:(0,n.jsx)(S.Z,{}),onClick:i,children:"Submission Help"}),(0,n.jsx)(y.ZP,{danger:!0,icon:(0,n.jsx)(w.Z,{}),href:"/demo/cna.csv",target:"_blank",children:"View Demo File"})]})},A=t(57307);let I=()=>(0,n.jsxs)(a.Z,{component:"span",sx:{fontSize:"16px"},children:["It takes a few minutes to ",(0,n.jsx)(a.Z,{component:"span",sx:{color:"red"},children:"RUN DEMO"}),". Click ",(0,n.jsx)(a.Z,{component:"span",sx:{color:"red"},children:"VIEW DEMO RESULT"})," to see the precomputed demo results immediately.",(0,n.jsx)("br",{}),"The ",(0,n.jsx)(a.Z,{component:"span",sx:{color:"red"},children:"maximum limit"})," for observations is ",(0,n.jsx)(a.Z,{component:"span",sx:{color:"red"},children:"1000"}),". For a typical file of 1000 observations \xd7 600 features, the runtime is ",(0,n.jsx)(a.Z,{component:"span",sx:{color:"red"},children:"approximately 1 hour"}),"."]}),T=()=>(0,n.jsxs)(a.Z,{component:"span",sx:{fontSize:"16px"},children:["If you encounter any submission issues, please contact us at ",(0,n.jsx)("a",{href:"mailto:fxk@nwpu.edu.cn",children:"fxk@nwpu.edu.cn"})," or ",(0,n.jsx)("a",{href:"mailto:lingxi.chen@cityu.edu.hk",children:"lingxi.chen@cityu.edu.hk"})," for immediate assistance."]}),N=e=>{let{info:l=(0,n.jsx)(I,{}),helpInfo:t=(0,n.jsx)(T,{})}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.Z,{message:(0,n.jsx)("strong",{children:"Notice:"}),description:l,type:"warning",showIcon:!0}),(0,n.jsx)(A.Z,{message:(0,n.jsx)("strong",{children:"Help:"}),description:t,type:"info",showIcon:!0})]})};var D=t(83859),U=t(91499),R=t(1226),P=t(83074),O=t(75009),F=t(45243),E=t(31430),z=t(64484),B=e=>{let{isModalOpen:l,setIsModelOpen:t,submissionStatus:i,taskUUID:s}=e,r=(0,c.z)(),o=()=>{t(!1)};return(0,n.jsx)(P.Z,{title:null,open:l,footer:null,centered:!0,closable:!1,children:(0,n.jsx)(O.ZP,{status:i?"success":"error",title:i?"Successfully Submit A Task!":"Some Error Occur During Submission!",subTitle:i?"Please keep the below UUID for task querying!":"",icon:i?(0,n.jsx)(F.Z,{style:{fontSize:"72px",color:"#52c41a"}}):(0,n.jsx)(E.Z,{style:{fontSize:"72px",color:"#ff4d4f"}}),extra:i?(0,n.jsxs)(g.Z,{sx:{alignItems:"center",marginBottom:"-40px"},spacing:3,children:[(0,n.jsxs)(g.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center",width:"350px",backgroundColor:"#0053B30D",borderRadius:"12px",padding:"16px 16px",fontSize:"14px"},children:[(0,n.jsx)(a.Z,{component:"span",children:s}),(0,n.jsx)(a.Z,{component:"span",children:(0,n.jsx)(z.Z,{style:{color:"rgb(148 163 184)"},onClick:()=>{navigator.clipboard.writeText(s).then(()=>{r.success("Task UUID Copy Successfully!")}).catch(e=>{r.error("Failed To Copy Task UUID.")})}})})]}),(0,n.jsxs)(g.Z,{direction:"row",spacing:3,children:[(0,n.jsx)(y.ZP,{onClick:()=>{let e=new Blob([s],{type:"text/plain"}),l=URL.createObjectURL(e),t=document.createElement("a");t.href=l,t.download="Task_UUID.txt",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(l)},size:"large",style:{width:"180px"},children:"Download as TXT"}),(0,n.jsx)(y.ZP,{type:"primary",size:"large",style:{width:"180px"},onClick:o,children:"Confirm Submission"})]})]}):(0,n.jsx)(a.Z,{sx:{marginBottom:"-40px"},children:(0,n.jsx)(y.ZP,{onClick:o,size:"large",danger:!0,style:{width:"300px"},children:"Confirm"})})})})};let{Title:L}=u.default,{Option:q}=d.default,{Dragger:M}=p.default,V=[{value:"hg38",label:"hg38"},{value:"hg19",label:"hg19"}],H=[{value:"sample",label:"Bulk Sequencing"},{value:"cell",label:"Single-cell Sequencing"},{value:"spot",label:"Spatial Transcriptomics"}],G=[{value:"bin",label:"Bin"},{value:"gene",label:"Gene"}],W=[{value:"int",label:"Absolute"},{value:"log",label:"Log"}],$=e=>{var l;return Array.isArray(e)?e:null==e?void 0:null===(l=e.fileList)||void 0===l?void 0:l.slice(-1)},X=e=>[{key:"1",label:(0,n.jsx)(a.Z,{onClick:()=>e("TCGA-ACC"),children:"TCGA-ACC"})},{key:"2",label:(0,n.jsx)(a.Z,{onClick:()=>e("WCDT-MCRPC"),children:"WCDT-MCRPC"})},{key:"3",label:(0,n.jsx)(a.Z,{onClick:()=>e("BRCA-T10"),children:"BRCA-T10"})}],J=e=>[{key:"1",label:(0,n.jsx)(a.Z,{onClick:()=>e.push("/workspace/detail?taskId=78a1e758-b153-4aa2-a031-246388aaf025"),children:"TCGA-ACC"})},{key:"2",label:(0,n.jsx)(a.Z,{onClick:()=>e.push("/workspace/detail?taskId=46b4de38-409f-4585-b972-4bcfb6d83caa"),children:"WCDT-MCRPC"})},{key:"3",label:(0,n.jsx)(a.Z,{onClick:()=>e.push("/workspace/detail?taskId=f0c404b6-552a-4004-a2d4-96b2eeb4760f"),children:"BRCA-T10"})}];var K=e=>{let{}=e,[l,t]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1),[r,u]=(0,i.useState)(""),[p,v]=(0,i.useState)(!0),Z=(0,c.z)(),C=(0,o.useRouter)(),k=X(async e=>{try{t(!0);let l=await U.Z.get((0,R.$G)(e));u(l.data.data.uuid),v(!0),s(!0),Z.success("Submit Success!")}catch(e){v(!1),s(!0),Z.error("Submit Fail!")}finally{t(!1)}}),S=J(C),w=async e=>{try{var l,n,i;t(!0);let a=new FormData;a.append("k",null!==(i=e.k)&&void 0!==i?i:10),a.append("ref",e.ref),a.append("obs_type",e.obs_type),a.append("window_type",e.window_type),a.append("value_type",e.value_type),e.email&&a.append("email",e.email);let r=null===(n=e.input_file)||void 0===n?void 0:null===(l=n[0])||void 0===l?void 0:l.originFileObj;r&&a.append("input_file",r,r.name);let o=await U.Z.post((0,R.gR)(),a,{headers:{"Content-Type":"multipart/form-data"},timeout:6e5});u(o.data.data.uuid),v(!0),s(!0),Z.success("Submit Success!")}catch(e){v(!1),s(!0),Z.error("Submit Fail!")}finally{t(!1)}};return(0,n.jsxs)(m.Z,{spinning:l,tip:"Submitting, please wait...",size:"large",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 180px)"},children:[(0,n.jsxs)(g.Z,{sx:{px:"12px"},spacing:2,children:[(0,n.jsx)(L,{level:2,style:{marginTop:"12px",paddingBottom:"12px",borderBottom:"1px solid rgb(211, 211, 211)"},children:"Basic CNA Annotation"}),(0,n.jsx)(_,{runDemoItems:k,viewResultItems:S,onHelp:()=>{C.push("/tutorial")}}),(0,n.jsx)(N,{})]}),(0,n.jsx)(x.Z,{style:{marginTop:24,borderRadius:8,border:"1px solid #eee",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:(0,n.jsxs)(h.Z,{layout:"vertical",onFinish:w,initialValues:{k:10,ref:"hg38",obs_type:"sample",window_type:"bin",value_type:"int",email:""},children:[(0,n.jsx)(h.Z.Item,{name:"k",label:"k",tooltip:"Parameter for clustering/nearest neighbors, default is 10",rules:[{type:"number",min:1,message:"k must be â‰¥ 1"}],children:(0,n.jsx)(b.Z,{style:{width:"100%"},placeholder:"10"})}),(0,n.jsx)(h.Z.Item,{name:"ref",label:"Reference",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select reference genome",children:V.map(e=>(0,n.jsx)(q,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"obs_type",label:"Obs Type",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select observation type",children:H.map(e=>(0,n.jsx)(q,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"window_type",label:"Window Type",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select window type",children:G.map(e=>(0,n.jsx)(q,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"value_type",label:"Value Type",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select value type",children:W.map(e=>(0,n.jsx)(q,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"email",label:"Email",tooltip:"Optional. Provide your email if you wish to receive notifications.",rules:[{type:"email",message:"Please enter a valid email address."}],children:(0,n.jsx)(f.Z,{placeholder:"Enter your email (optional)"})}),(0,n.jsx)(h.Z.Item,{name:"input_file",label:"Input File",valuePropName:"fileList",getValueFromEvent:$,tooltip:"Upload CNA matrix file",rules:[{required:!0}],children:(0,n.jsxs)(M,{name:"file",multiple:!1,beforeUpload:()=>!1,accept:".csv",children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(D.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Drag file here, or click to select"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:"Supports CSV."})]})}),(0,n.jsx)(h.Z.Item,{children:(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(y.ZP,{type:"primary",htmlType:"submit",loading:l,children:"Submit"}),(0,n.jsx)(y.ZP,{htmlType:"reset",children:"Reset"})]})})]})}),(0,n.jsx)(B,{isModalOpen:a,setIsModelOpen:s,taskUUID:r,submissionStatus:p})]})};let{Title:Q}=u.default,{Option:Y}=d.default,{Dragger:ee}=p.default,el=[{value:"hg38",label:"hg38"},{value:"hg19",label:"hg19"}],et=[{value:"sample",label:"Bulk Sequencing"},{value:"cell",label:"Single-cell Sequencing"},{value:"spot",label:"Spatial Transcriptomics"}],en=e=>Array.isArray(e)?e:null==e?void 0:e.fileList,ei=e=>[{key:"1",label:(0,n.jsx)(a.Z,{onClick:()=>e("LUAD"),children:"LUAD"})},{key:"2",label:(0,n.jsx)(a.Z,{onClick:()=>e("LUSC"),children:"LUSC"})},{key:"3",label:(0,n.jsx)(a.Z,{onClick:()=>e("COAD"),children:"COAD"})}],ea=e=>[{key:"1",label:(0,n.jsx)(a.Z,{onClick:()=>e.push("/workspace/detail?taskId=c0cdebe2-b827-42a3-9ba9-290f6141a3e6"),children:"LUAD"})},{key:"2",label:(0,n.jsx)(a.Z,{onClick:()=>e.push("/workspace/detail?taskId=1aa0a87b-c907-4deb-9b17-2f8618dd4013"),children:"LUSC"})},{key:"3",label:(0,n.jsx)(a.Z,{onClick:()=>e.push("/workspace/detail?taskId=ed8a3bc2-2a73-42be-8077-8099012c4d87"),children:"COAD"})}];var es=e=>{let{}=e,[l,t]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1),[r,u]=(0,i.useState)(""),[p,b]=(0,i.useState)(!0),v=(0,c.z)(),Z=(0,o.useRouter)(),C=ei(async e=>{try{t(!0);let l=await U.Z.get((0,R.$G)(e));u(l.data.data.uuid),b(!0),s(!0),v.success("Submit Success!")}catch(e){b(!1),s(!0),v.error("Submit Fail!")}finally{t(!1)}}),k=ea(Z),S=async e=>{try{var l,n;t(!0);let i=new FormData;i.append("ref",e.ref),i.append("obs_type",e.obs_type),e.email&&i.append("email",e.email);let a=null===(n=e.input_file)||void 0===n?void 0:null===(l=n[0])||void 0===l?void 0:l.originFileObj;for(let[e,l]of(a&&i.append("input_file",a,a.name),i.entries()))console.log(e,l);let r=await U.Z.post((0,R.DM)(),i,{headers:{"Content-Type":"multipart/form-data"},timeout:6e5});u(r.data.data.uuid),b(!0),s(!0),v.success("Submit Success!")}catch(e){b(!1),s(!0),v.error("Submit Fail!")}finally{t(!1)}};return(0,n.jsxs)(m.Z,{spinning:l,tip:"Submitting, please wait...",size:"large",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 180px)"},children:[(0,n.jsxs)(g.Z,{sx:{px:"12px"},spacing:2,children:[(0,n.jsx)(Q,{level:2,style:{marginTop:"12px",paddingBottom:"12px",borderBottom:"1px solid rgb(211, 211, 211)"},children:"Recurrent CNA Annotation"}),(0,n.jsx)(_,{runDemoItems:C,viewResultItems:k,onHelp:()=>{Z.push("/tutorial")},isAnalysis:!0}),(0,n.jsx)(N,{}),(0,n.jsx)(x.Z,{style:{marginTop:24,borderRadius:8,border:"1px solid #eee",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:(0,n.jsxs)(h.Z,{layout:"vertical",onFinish:S,initialValues:{ref:"hg38",obs_type:"sample",email:""},children:[(0,n.jsx)(h.Z.Item,{name:"ref",label:"Reference",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select reference genome",children:el.map(e=>(0,n.jsx)(Y,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"obs_type",label:"Obs Type",rules:[{required:!0}],children:(0,n.jsx)(d.default,{placeholder:"Select observation type",children:et.map(e=>(0,n.jsx)(Y,{value:e.value,children:e.label},e.value))})}),(0,n.jsx)(h.Z.Item,{name:"email",label:"Email",tooltip:"Optional. Provide your email if you wish to receive notifications.",rules:[{type:"email",message:"Please enter a valid email address."}],children:(0,n.jsx)(f.Z,{placeholder:"Enter your email (optional)"})}),(0,n.jsx)(h.Z.Item,{name:"input_file",label:"Input File",valuePropName:"fileList",getValueFromEvent:en,tooltip:"Upload a single CNA matrix file or a zip file containing multiple CNV matrix files",rules:[{required:!0}],children:(0,n.jsxs)(ee,{name:"file",multiple:!1,beforeUpload:()=>!1,accept:".csv,.zip",children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(D.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Drag file here, or click to select"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:"Supports .csv and .zip."})]})}),(0,n.jsx)(h.Z.Item,{children:(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(y.ZP,{type:"primary",htmlType:"submit",loading:l,children:"Submit"}),(0,n.jsx)(y.ZP,{htmlType:"reset",children:"Reset"})]})})]})})]}),(0,n.jsx)(B,{isModalOpen:a,setIsModelOpen:s,taskUUID:r,submissionStatus:p})]})};let er={components:{Menu:{itemHeight:48,itemPaddingInline:20,fontSize:16}}},eo=[{key:"basicCNAAnnotation",label:"Basic CNA Annotation"},{key:"recurrentCNAAnnotation",label:"Recurrence CNA Annotation"}];var ec=e=>{let{}=e,[l,t]=(0,i.useState)("basicCNAAnnotation");return(0,n.jsxs)(a.Z,{sx:{display:"flex",minHeight:"calc(100vh - 148px)"},children:[(0,n.jsx)(a.Z,{sx:{pt:"12px",width:350,borderRight:"1px solid #e5e5e5"},children:(0,n.jsx)(s.ZP,{theme:er,children:(0,n.jsx)(r.Z,{mode:"inline",selectedKeys:[l],onClick:e=>{let{key:l}=e;return t(l)},style:{borderRight:"none"},items:eo})})}),(0,n.jsx)(a.Z,{flex:1,p:3,overflow:"auto",children:(()=>{switch(l){case"basicCNAAnnotation":return(0,n.jsx)(K,{});case"recurrentCNAAnnotation":return(0,n.jsx)(es,{});default:return null}})()})]})}}},function(e){e.O(0,[920,944,943,816,441,530,721,141,513,416,888,774,179],function(){return e(e.s=91992)}),_N_E=e.O()}]);