(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{1992:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workflow",function(){return n(7322)}])},1226:function(e,t,n){"use strict";n.d(t,{$G:function(){return c},BQ:function(){return y},DM:function(){return i},Dy:function(){return h},ED:function(){return m},EY:function(){return d},Ed:function(){return p},JO:function(){return x},UF:function(){return s},US:function(){return o},d1:function(){return b},gR:function(){return a},jo:function(){return r},oi:function(){return f},te:function(){return u}});var l=n(5955);n(8244);let a=()=>"".concat(l.l,"/submit_basic_annotation_task/"),i=()=>"".concat(l.l,"/submit_recurrent_cna_task/"),o=()=>"".concat(l.l,"/query_task/"),c=e=>"".concat(l.l,"/run_demo/?name=").concat(e),r=e=>"".concat(l.l,"/query_task/?taskUUID=").concat(e),s=e=>"".concat(l.l,"/CNA_matrix/?uuid=").concat(e),u=e=>"".concat(l.l,"/CNA_meta/?uuid=").concat(e),d=e=>"".concat(l.l,"/CNA_tree/?uuid=").concat(e),p=e=>"".concat(l.l,"/CNA_genes/?uuid=").concat(e),m=e=>"".concat(l.l,"/CNA_newick/?uuid=").concat(e),x=e=>"".concat(l.l,"/CNA_gene_matrix/?uuid=").concat(e),h=e=>"".concat(l.l,"/CNA_terms/?uuid=").concat(e),b=e=>"".concat(l.l,"/CNA_term_matrix/?uuid=").concat(e),f=e=>"".concat(l.l,"/ploidy_distribution/?uuid=").concat(e),y=e=>"".concat(l.l,"/focal_CNA_info/?uuid=").concat(e)},1499:function(e,t,n){"use strict";var l=n(7066),a=n(5955);let i=l.Z.create({baseURL:a.Sg,timeout:6e4,headers:{"Content-Type":"application/json"}});t.Z=i},5955:function(e,t,n){"use strict";n.d(t,{Sg:function(){return l},Vl:function(){return a},l:function(){return i}});let l="https://cna.fengslab.com/api",a=l+"/database",i=l+"/analysis"},8244:function(e,t,n){"use strict";n.d(t,{$V:function(){return c},N0:function(){return o},OG:function(){return u},gS:function(){return r},gy:function(){return b},h8:function(){return p},ks:function(){return h},l$:function(){return s},l4:function(){return x},tj:function(){return i},u4:function(){return d},vS:function(){return m},xW:function(){return a}});var l=n(5955);let a=()=>"".concat(l.Vl,"/datasets/"),i=e=>"".concat(l.Vl,"/datasets/").concat(encodeURIComponent(e),"/"),o=e=>"".concat(l.Vl,"/samples/?dataset_name=").concat(encodeURIComponent(e)),c=(e,t)=>"".concat(l.Vl,"/CNA_matrix/?dataset_name=").concat(encodeURIComponent(e),"&workflow_type=").concat(encodeURIComponent(t)),r=(e,t)=>"".concat(l.Vl,"/CNA_meta/?dataset_name=").concat(encodeURIComponent(e),"&workflow_type=").concat(encodeURIComponent(t)),s=(e,t)=>"".concat(l.Vl,"/CNA_tree/?dataset_name=").concat(encodeURIComponent(e),"&workflow_type=").concat(encodeURIComponent(t)),u=(e,t)=>"".concat(l.Vl,"/CNA_genes/?dataset_name=").concat(encodeURIComponent(e),"&workflow_type=").concat(encodeURIComponent(t)),d=(e,t)=>"".concat(l.Vl,"/CNA_newick/?dataset_name=").concat(encodeURIComponent(e),"&workflow_type=").concat(encodeURIComponent(t)),p=()=>"".concat(l.Vl,"/CNA_gene_matrix/"),m=(e,t)=>"".concat(l.Vl,"/CNA_terms/?dataset_name=").concat(encodeURIComponent(e),"&workflow_type=").concat(encodeURIComponent(t)),x=()=>"".concat(l.Vl,"/CNA_term_matrix/"),h=(e,t)=>"".concat(l.Vl,"/focal_CNA_info/?dataset_name=").concat(encodeURIComponent(e),"&workflow_type=").concat(encodeURIComponent(t)),b=(e,t)=>"".concat(l.Vl,"/ploidy_distribution/?dataset_name=").concat(encodeURIComponent(e),"&workflow_type=").concat(encodeURIComponent(t))},7322:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eo}});var l=n(5893),a=n(7294),i=n(3368),o=n(2904),c=n(8025),r=n(1163),s=n(9980),u=n(530),d=n(2492),p=n(8792),m=n(20),x=n(3721),h=n(7436),b=n(7489),f=n(2635),y=n(8514),j=n(9073),C=n(2130),g=n(7672),k=n(7464),_=n(3293),v=n(7228),Z=e=>{let{runDemoItems:t,viewResultItems:n,onHelp:a}=e;return(0,l.jsxs)(f.Z,{children:[(0,l.jsx)(C.Z,{menu:{items:t},placement:"bottom",children:(0,l.jsx)(y.ZP,{type:"primary",icon:(0,l.jsx)(k.Z,{}),children:"Run Demo"})}),(0,l.jsx)(C.Z,{menu:{items:n},placement:"bottom",children:(0,l.jsx)(y.ZP,{danger:!0,icon:(0,l.jsx)(_.Z,{}),children:"View Demo Result"})}),(0,l.jsx)(g.Z,{type:"vertical",verticalAlign:"middle",style:{height:24}}),(0,l.jsx)(y.ZP,{type:"primary",icon:(0,l.jsx)(v.Z,{}),onClick:a,children:"Submission Help"})]})},w=n(7307);let S=()=>(0,l.jsxs)(i.Z,{component:"span",sx:{fontSize:"16px"},children:["It takes a few minutes to ",(0,l.jsx)(i.Z,{component:"span",sx:{color:"red"},children:"RUN DEMO"}),". Click ",(0,l.jsx)(i.Z,{component:"span",sx:{color:"red"},children:"VIEW DEMO RESULT"})," to see the precomputed demo results immediately."]}),A=e=>{let{info:t=(0,l.jsx)(S,{})}=e;return(0,l.jsx)(w.Z,{message:t,type:"info",showIcon:!0})};var I=n(3859),U=n(1499),R=n(1226),N=n(9137),T=n(5009),D=n(5243),V=n(1430),P=n(4484),O=e=>{let{isModalOpen:t,setIsModelOpen:n,submissionStatus:a,taskUUID:o}=e,c=(0,s.z)(),r=()=>{n(!1)};return(0,l.jsx)(N.Z,{title:null,open:t,footer:null,centered:!0,closable:!1,children:(0,l.jsx)(T.ZP,{status:a?"success":"error",title:a?"Successfully Submit A Task!":"Some Error Occur During Submission!",subTitle:a?"Please keep the below UUID for task querying!":"",icon:a?(0,l.jsx)(D.Z,{style:{fontSize:"72px",color:"#52c41a"}}):(0,l.jsx)(V.Z,{style:{fontSize:"72px",color:"#ff4d4f"}}),extra:a?(0,l.jsxs)(j.Z,{sx:{alignItems:"center",marginBottom:"-40px"},spacing:3,children:[(0,l.jsxs)(j.Z,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center",width:"350px",backgroundColor:"#0053B30D",borderRadius:"12px",padding:"16px 16px",fontSize:"14px"},children:[(0,l.jsx)(i.Z,{component:"span",children:o}),(0,l.jsx)(i.Z,{component:"span",children:(0,l.jsx)(P.Z,{style:{color:"rgb(148 163 184)"},onClick:()=>{navigator.clipboard.writeText(o).then(()=>{c.success("Task UUID Copy Successfully!")}).catch(e=>{c.error("Failed To Copy Task UUID.")})}})})]}),(0,l.jsxs)(j.Z,{direction:"row",spacing:3,children:[(0,l.jsx)(y.ZP,{onClick:()=>{let e=new Blob([o],{type:"text/plain"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="Task_UUID.txt",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)},size:"large",style:{width:"180px"},children:"Download as TXT"}),(0,l.jsx)(y.ZP,{type:"primary",size:"large",style:{width:"180px"},onClick:r,children:"Confirm Submission"})]})]}):(0,l.jsx)(i.Z,{sx:{marginBottom:"-40px"},children:(0,l.jsx)(y.ZP,{onClick:r,size:"large",danger:!0,style:{width:"300px"},children:"Confirm"})})})})};let{Title:B}=u.default,{Option:L}=d.default,{Dragger:E}=p.default,F=[{value:"hg38",label:"hg38"},{value:"hg19",label:"hg19"}],q=[{value:"sample",label:"Bulk Sequencing"},{value:"cell",label:"Single-cell Sequencing"},{value:"spot",label:"Spatial Transcriptomics"}],z=[{value:"bin",label:"Bin"},{value:"gene",label:"Gene"}],M=[{value:"int",label:"Integer"},{value:"log",label:"Log"}],G=e=>{var t;return Array.isArray(e)?e:null==e?void 0:null===(t=e.fileList)||void 0===t?void 0:t.slice(-1)},H=e=>[{key:"1",label:(0,l.jsx)(i.Z,{onClick:()=>e("TCGA-ACC"),children:"TCGA-ACC"})},{key:"2",label:(0,l.jsx)(i.Z,{onClick:()=>e("WCDT-MCRPC"),children:"WCDT-MCRPC"})},{key:"3",label:(0,l.jsx)(i.Z,{onClick:()=>e("BRCA-T10"),children:"BRCA-T10"})}],W=e=>[{key:"1",label:(0,l.jsx)(i.Z,{onClick:()=>e.push("/workspace/detail?taskId=5935135b-e52c-43aa-a949-0b526c000013"),children:"TCGA-ACC"})},{key:"2",label:(0,l.jsx)(i.Z,{onClick:()=>e.push("/workspace/detail?taskId=d7b6653e-b819-44db-a9c7-78719b0587d6"),children:"WCDT-MCRPC"})},{key:"3",label:(0,l.jsx)(i.Z,{onClick:()=>e.push("/workspace/detail?taskId=69420ed8-532f-4701-b081-1ea77a12fca5"),children:"BRCA-T10"})}];var $=e=>{let{}=e,[t,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[p,C]=(0,a.useState)(!0),g=(0,s.z)(),k=(0,r.useRouter)(),_=H(async e=>{try{n(!0);let t=await U.Z.get((0,R.$G)(e));u(t.data.data.uuid),C(!0),o(!0),g.success("Submit Success!")}catch(e){C(!1),o(!0),g.error("Submit Fail!")}finally{n(!1)}}),v=W(k),w=async e=>{try{var t,l,a;n(!0);let i=new FormData;i.append("k",null!==(a=e.k)&&void 0!==a?a:10),i.append("ref",e.ref),i.append("obs_type",e.obs_type),i.append("window_type",e.window_type),i.append("value_type",e.value_type);let c=null===(l=e.input_file)||void 0===l?void 0:null===(t=l[0])||void 0===t?void 0:t.originFileObj;c&&i.append("input_file",c,c.name);let r=await U.Z.post((0,R.gR)(),i,{headers:{"Content-Type":"multipart/form-data"},timeout:6e5});u(r.data.data.uuid),C(!0),o(!0),g.success("Submit Success!")}catch(e){C(!1),o(!0),g.error("Submit Fail!")}finally{n(!1)}};return(0,l.jsxs)(m.Z,{spinning:t,tip:"Submitting, please wait...",size:"large",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 180px)"},children:[(0,l.jsxs)(j.Z,{sx:{px:"12px"},spacing:2,children:[(0,l.jsx)(B,{level:2,style:{marginTop:"12px",paddingBottom:"12px",borderBottom:"1px solid rgb(211, 211, 211)"},children:"Basic CNA Annotation"}),(0,l.jsx)(Z,{runDemoItems:_,viewResultItems:v,onHelp:()=>{k.push("/tutorial")}}),(0,l.jsx)(A,{})]}),(0,l.jsx)(x.Z,{style:{marginTop:24,borderRadius:8,border:"1px solid #eee",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:(0,l.jsxs)(h.Z,{layout:"vertical",onFinish:w,initialValues:{k:10,ref:"hg38",obs_type:"sample",window_type:"bin",value_type:"int"},children:[(0,l.jsx)(h.Z.Item,{name:"k",label:"k",tooltip:"Parameter for clustering/nearest neighbors, default is 10",rules:[{type:"number",min:1,message:"k must be â‰¥ 1"}],children:(0,l.jsx)(b.Z,{style:{width:"100%"},placeholder:"10"})}),(0,l.jsx)(h.Z.Item,{name:"ref",label:"Reference",rules:[{required:!0}],children:(0,l.jsx)(d.default,{placeholder:"Select reference genome",children:F.map(e=>(0,l.jsx)(L,{value:e.value,children:e.label},e.value))})}),(0,l.jsx)(h.Z.Item,{name:"obs_type",label:"Obs Type",rules:[{required:!0}],children:(0,l.jsx)(d.default,{placeholder:"Select observation type",children:q.map(e=>(0,l.jsx)(L,{value:e.value,children:e.label},e.value))})}),(0,l.jsx)(h.Z.Item,{name:"window_type",label:"Window Type",rules:[{required:!0}],children:(0,l.jsx)(d.default,{placeholder:"Select window type",children:z.map(e=>(0,l.jsx)(L,{value:e.value,children:e.label},e.value))})}),(0,l.jsx)(h.Z.Item,{name:"value_type",label:"Value Type",rules:[{required:!0}],children:(0,l.jsx)(d.default,{placeholder:"Select value type",children:M.map(e=>(0,l.jsx)(L,{value:e.value,children:e.label},e.value))})}),(0,l.jsx)(h.Z.Item,{name:"input_file",label:"Input File",valuePropName:"fileList",getValueFromEvent:G,tooltip:"Upload CNA matrix file",rules:[{required:!0}],children:(0,l.jsxs)(E,{name:"file",multiple:!1,beforeUpload:()=>!1,accept:".csv",children:[(0,l.jsx)("p",{className:"ant-upload-drag-icon",children:(0,l.jsx)(I.Z,{})}),(0,l.jsx)("p",{className:"ant-upload-text",children:"Drag file here, or click to select"}),(0,l.jsx)("p",{className:"ant-upload-hint",children:"Supports CSV."})]})}),(0,l.jsx)(h.Z.Item,{children:(0,l.jsxs)(f.Z,{children:[(0,l.jsx)(y.ZP,{type:"primary",htmlType:"submit",loading:t,children:"Submit"}),(0,l.jsx)(y.ZP,{htmlType:"reset",children:"Reset"})]})})]})}),(0,l.jsx)(O,{isModalOpen:i,setIsModelOpen:o,taskUUID:c,submissionStatus:p})]})};let{Title:X}=u.default,{Option:J}=d.default,{Dragger:K}=p.default,Q=[{value:"hg38",label:"hg38"},{value:"hg19",label:"hg19"}],Y=[{value:"sample",label:"Bulk Sequencing"},{value:"cell",label:"Single-cell Sequencing"},{value:"spot",label:"Spatial Transcriptomics"}],ee=e=>Array.isArray(e)?e:null==e?void 0:e.fileList,et=e=>[{key:"1",label:(0,l.jsx)(i.Z,{onClick:()=>e("LUAD"),children:"LUAD"})},{key:"2",label:(0,l.jsx)(i.Z,{onClick:()=>e("LUSC"),children:"LUSC"})},{key:"3",label:(0,l.jsx)(i.Z,{onClick:()=>e("COAD"),children:"COAD"})}],en=e=>[{key:"1",label:(0,l.jsx)(i.Z,{onClick:()=>e.push("/workspace/detail?taskId=c0cdebe2-b827-42a3-9ba9-290f6141a3e6"),children:"LUAD"})},{key:"2",label:(0,l.jsx)(i.Z,{onClick:()=>e.push("/workspace/detail?taskId=1aa0a87b-c907-4deb-9b17-2f8618dd4013"),children:"LUSC"})},{key:"3",label:(0,l.jsx)(i.Z,{onClick:()=>e.push("/workspace/detail?taskId=ed8a3bc2-2a73-42be-8077-8099012c4d87"),children:"COAD"})}];var el=e=>{let{}=e,[t,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[p,b]=(0,a.useState)(!0),C=(0,s.z)(),g=(0,r.useRouter)(),k=et(async e=>{try{n(!0);let t=await U.Z.get((0,R.$G)(e));u(t.data.data.uuid),b(!0),o(!0),C.success("Submit Success!")}catch(e){b(!1),o(!0),C.error("Submit Fail!")}finally{n(!1)}}),_=en(g),v=async e=>{try{var t,l;n(!0);let a=new FormData;a.append("ref",e.ref),a.append("obs_type",e.obs_type);let i=null===(l=e.input_file)||void 0===l?void 0:null===(t=l[0])||void 0===t?void 0:t.originFileObj;for(let[e,t]of(i&&a.append("input_file",i,i.name),a.entries()))console.log(e,t);let c=await U.Z.post((0,R.DM)(),a,{headers:{"Content-Type":"multipart/form-data"},timeout:6e5});u(c.data.data.uuid),b(!0),o(!0),C.success("Submit Success!")}catch(e){b(!1),o(!0),C.error("Submit Fail!")}finally{n(!1)}};return(0,l.jsxs)(m.Z,{spinning:t,tip:"Submitting, please wait...",size:"large",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 180px)"},children:[(0,l.jsxs)(j.Z,{sx:{px:"12px"},spacing:2,children:[(0,l.jsx)(X,{level:2,style:{marginTop:"12px",paddingBottom:"12px",borderBottom:"1px solid rgb(211, 211, 211)"},children:"Recurrent CNA Annotation"}),(0,l.jsx)(Z,{runDemoItems:k,viewResultItems:_,onHelp:()=>{g.push("/tutorial")}}),(0,l.jsx)(A,{}),(0,l.jsx)(x.Z,{style:{marginTop:24,borderRadius:8,border:"1px solid #eee",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:(0,l.jsxs)(h.Z,{layout:"vertical",onFinish:v,initialValues:{ref:"hg38",obs_type:"sample"},children:[(0,l.jsx)(h.Z.Item,{name:"ref",label:"Reference",rules:[{required:!0}],children:(0,l.jsx)(d.default,{placeholder:"Select reference genome",children:Q.map(e=>(0,l.jsx)(J,{value:e.value,children:e.label},e.value))})}),(0,l.jsx)(h.Z.Item,{name:"obs_type",label:"Obs Type",rules:[{required:!0}],children:(0,l.jsx)(d.default,{placeholder:"Select observation type",children:Y.map(e=>(0,l.jsx)(J,{value:e.value,children:e.label},e.value))})}),(0,l.jsx)(h.Z.Item,{name:"input_file",label:"Input File",valuePropName:"fileList",getValueFromEvent:ee,tooltip:"Upload CNA matrix file",rules:[{required:!0}],children:(0,l.jsxs)(K,{name:"file",multiple:!1,beforeUpload:()=>!1,accept:".csv,.zip",children:[(0,l.jsx)("p",{className:"ant-upload-drag-icon",children:(0,l.jsx)(I.Z,{})}),(0,l.jsx)("p",{className:"ant-upload-text",children:"Drag file here, or click to select"}),(0,l.jsx)("p",{className:"ant-upload-hint",children:"Supports .csv and .zip."})]})}),(0,l.jsx)(h.Z.Item,{children:(0,l.jsxs)(f.Z,{children:[(0,l.jsx)(y.ZP,{type:"primary",htmlType:"submit",loading:t,children:"Submit"}),(0,l.jsx)(y.ZP,{htmlType:"reset",children:"Reset"})]})})]})})]}),(0,l.jsx)(O,{isModalOpen:i,setIsModelOpen:o,taskUUID:c,submissionStatus:p})]})};let ea={components:{Menu:{itemHeight:48,itemPaddingInline:20,fontSize:16}}},ei=[{key:"basicCNAAnnotation",label:"Basic CNA Annotation"},{key:"recurrentCNAAnnotation",label:"Recurrence CNA Annotation"}];var eo=e=>{let{}=e,[t,n]=(0,a.useState)("basicCNAAnnotation");return(0,l.jsxs)(i.Z,{sx:{display:"flex",minHeight:"calc(100vh - 148px)"},children:[(0,l.jsx)(i.Z,{sx:{pt:"12px",width:350,borderRight:"1px solid #e5e5e5"},children:(0,l.jsx)(o.ZP,{theme:ea,children:(0,l.jsx)(c.Z,{mode:"inline",selectedKeys:[t],onClick:e=>{let{key:t}=e;return n(t)},style:{borderRight:"none"},items:ei})})}),(0,l.jsx)(i.Z,{flex:1,p:3,overflow:"auto",children:(()=>{switch(t){case"basicCNAAnnotation":return(0,l.jsx)($,{});case"recurrentCNAAnnotation":return(0,l.jsx)(el,{});default:return null}})()})]})}}},function(e){e.O(0,[362,107,314,441,816,530,43,721,396,888,774,179],function(){return e(e.s=1992)}),_N_E=e.O()}]);